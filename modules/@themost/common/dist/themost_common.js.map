{"version":3,"file":"themost_common.js","sources":["../src/emitter.js","../src/http-error-codes.js","../src/errors.js","../src/utils.js","../src/config.js","../src/html.js","../src/app.js"],"sourcesContent":["/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\n \nimport {EventEmitter} from 'events';\nimport {applyEachSeries} from 'async';\n\n/**\n * @classdesc SequentialEventEmitter class is an extension of node.js EventEmitter class where listeners are executing in series.\n * @class\n * @constructor\n * @augments EventEmitter\n */\nexport class SequentialEventEmitter extends EventEmitter {\n    /**\n     * Executes event listeners in series.\n     * @param {String} event - The event that is going to be executed.\n     * @param {...*} args - An object that contains the event arguments.\n     */\n    // eslint-disable-next-line no-unused-vars\n    // tslint:disable-nex-lineb no-unused-variable\n    emit(event, _args) {\n        //ensure callback\n        callback = callback || (() => {});\n        //get listeners\n        if (typeof this.listeners !== 'function') {\n            throw new Error('undefined listeners');\n        }\n        const listeners = this.listeners(event);\n\n        const argsAndCallback = [].concat(Array.prototype.slice.call(arguments, 1));\n        if (argsAndCallback.length > 0) {\n            //check the last argument (expected callback function)\n            if (typeof argsAndCallback[argsAndCallback.length - 1] !== \"function\") {\n                throw new TypeError(\"Expected event callback\");\n            }\n        }\n        //get callback function (the last argument of arguments list)\n        const callback = argsAndCallback[argsAndCallback.length - 1];\n\n        //validate listeners\n        if (listeners.length===0) {\n            //exit emitter\n            return callback();\n        }\n        //apply each series\n        return applyEachSeries.apply(this, [listeners].concat(argsAndCallback));\n    }\n}\n","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\n \nconst Errors = [{\n    statusCode: 400,\n    title: \"Bad Request\",\n    message: \"The request cannot be fulfilled due to bad syntax.\"\n}, {\n    statusCode: 401,\n    title: \"Unauthorized\",\n    message: \"The request was a legal request, but requires user authentication.\"\n}, {\n    statusCode: 403,\n    title: \"Forbidden\",\n    message: \"The server understood the request, but is refusing to fulfill it.\"\n}, {\n    statusCode: 404,\n    title: \"Not Found\",\n    message: \"The requested resource could not be found but may be available again in the future.\"\n}, {\n    statusCode: 405,\n    title: \"Method Not Allowed\",\n    message: \"A request was made of a resource using a request method not supported by that resource.\"\n}, {\n    statusCode: 406,\n    title: \"Not Acceptable\",\n    message: \"The requested resource is only capable of generating content not acceptable according to the Accept headers sent in the request.\"\n}, {\n    statusCode: 407,\n    title: \"Proxy Authentication Required\",\n    message: \"The client must first authenticate itself with the proxy.\"\n}, {\n    statusCode: 408,\n    title: \"Request Timeout\",\n    message: \"The server timed out waiting for the request.\"\n}, {\n    statusCode: 409,\n    title: \"Conflict\",\n    message: \"The request could not be completed due to a conflict with the current state of the resource.\"\n}, {\n    statusCode: 410,\n    title: \"Gone\",\n    message: \"The resource requested is no longer available and will not be available again.\"\n}, {\n    statusCode: 411,\n    title: \"Length Required\",\n    message: \"The request did not specify the length of its content, which is required by the requested resource.\"\n}, {\n    statusCode: 412,\n    title: \"Precondition Failed\",\n    message: \"The server does not meet one of the preconditions that the requester put on the request.\"\n}, {\n    statusCode: 413,\n    title: \"Request Entity Too Large\",\n    message: \"The request is larger than the server is willing or able to process.\"\n}, {\n    statusCode: 414,\n    title: \"Request-URI Too Long\",\n    message: \"The URI provided was too long for the server to process.\"\n}, {\n    statusCode: 415,\n    title: \"Unsupported Media Type\",\n    message: \"The server is refusing to service the request because the payload is in a format not supported by this method on the target resource.\"\n}, {\n    statusCode: 416,\n    title: \"Requested Range Not Satisfiable\",\n    message: \"The client has asked for a portion of the file, but the server cannot supply that portion.\"\n}, {\n    statusCode: 417,\n    title: \"Expectation Failed\",\n    message: \"The server cannot meet the requirements of the Expect request-header field.\"\n}, {\n    statusCode: 496,\n    title: \"No Cert\",\n    message: \"The client must provide a certificate to fulfill the request.\"\n}, {\n    statusCode: 498,\n    title: \"Token expired\",\n    message: \"Token was expired or is in invalid state.\"\n}, {\n    statusCode: 499,\n    title: \"Token required\",\n    message: \"A token is required to fulfill the request.\"\n}, {\n    statusCode: 500,\n    title: \"Internal Server Error\",\n    message: \"The server encountered an internal error and was unable to complete your request.\"\n}, {\n    statusCode: 501,\n    title: \"Not Implemented\",\n    message: \"The server either does not recognize the request method, or it lacks the ability to fulfil the request.\"\n}, {\n    statusCode: 502,\n    title: \"Bad Gateway\",\n    message: \"The server was acting as a gateway or proxy and received an invalid response from the upstream server.\"\n}, {\n    statusCode: 503,\n    title: \"Service Unavailable\",\n    message: \"The server is currently unavailable (because it is overloaded or down for maintenance).\"\n}];\n\nmodule.exports.Errors = Errors;","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\nimport {Errors as errors} from './http-error-codes';\n\n\n/**\n * @classdesc Thrown when an application tries to call an abstract method.\n * @class\n */\nexport class AbstractMethodError extends Error {\n    /**\n     * @param {string=} msg\n     */\n    constructor(msg) {\n        super(msg);\n        this.message = msg || 'Class does not implement inherited abstract method.';\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\n\n/**\n * @classdesc Thrown when an application tries to instantiate an abstract class.\n * @class\n */\nexport class AbstractClassError extends Error {\n    /**\n     * @param {string=} msg\n     */\n    constructor(msg) {\n        this.message = msg || 'An abstract class cannot be instantiated.';\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\n\n/**\n * @classdesc Represents an error with a code.\n * @class\n */\nexport class CodedError extends Error {\n    /**\n     * @param {string} msg\n     * @param {string} code\n     */\n    constructor(msg, code) {\n        this.message = msg;\n        this.code = code;\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\n\n/**\n * @classdesc Thrown when an application tries to access a file which does not exist.\n * @class\n */\nexport class FileNotFoundError extends CodedError {\n    /**\n    * @param {string=} msg\n    */\n    constructor(msg) {\n        super(msg | 'File not found', \"EFOUND\");\n    }\n}\n\n\n/**\n * @classdesc Represents an HTTP error.\n * @class\n * @param {number} status\n * @param {string=} message\n * @param {string=} innerMessage\n * @constructor\n * @extends CodedError\n */\nexport class HttpError extends CodedError {\n    constructor(status, message, innerMessage) {\n        super(message, \"EHTTP\");\n        const finalStatus = Number.isNumber(status) ? status : 500;\n        const err = errors.find( x => {\n            return x.statusCode === finalStatus;\n        });\n        if (err) {\n            this.title = err.title;\n            this.message = message || err.message;\n            this.statusCode = err.statusCode;\n        }\n        else {\n            this.title = 'Internal Server Error';\n            this.message = message || 'The server encountered an internal error and was unable to complete the request.';\n            this.statusCode = finalStatus\n        }\n        if (typeof innerMessage !== 'undefined') {\n            this.innerMessage = innerMessage;\n        }\n    }\n\n    /**\n     * @param {Error=} err\n     * @returns {HttpError}\n     */\n    static create(err) {\n        if (err == null) {\n            return new HttpError(500);\n        }\n        if (err.hasOwnProperty('statusCode')) {\n            return Object.assign(new HttpError(err.statusCode, err.message), err);\n        }\n        else {\n            return Object.assign(new HttpError(500, err.message), err);\n        }\n    }\n}\n\n/**\n * @classdesc Represents a 400 HTTP Bad Request error.\n * @class\n */\nexport class HttpBadRequestError extends HttpError {\n    constructor(message, innerMessage) {\n        super(400, message, innerMessage);\n    }\n}\n\n/**\n * @classdesc Represents a 404 HTTP Not Found error.\n * @class\n * @property {string} resource - Gets or sets the requested resource which could not to be found\n */\n export class HttpNotFoundError extends HttpError {\n    constructor(message, innerMessage) {\n        super(404, message, innerMessage);\n    }\n }\n/**\n * @classdesc Represents a 405 HTTP Method Not Allowed error.\n * @class\n */\nexport class HttpMethodNotAllowedError extends HttpError {\n    constructor(message, innerMessage) {\n        super(405, message, innerMessage);\n    }\n}\n\n/**\n * @classdesc Represents a 401 HTTP Unauthorized error.\n * @class\n */\nexport class HttpUnauthorizedError extends HttpError {\n    constructor(message, innerMessage) {\n        super(401, message, innerMessage);\n    }\n}\n/**\n * @classdesc HTTP 406 Not Acceptable exception class\n * @class\n */\nexport class HttpNotAcceptableError extends HttpError {\n    constructor(message, innerMessage) {\n        super(406, message, innerMessage);\n    }\n}\n\n/**\n * @classdesc HTTP 408 RequestTimeout exception class\n * @class\n */\nexport class HttpRequestTimeoutError extends HttpError {\n    constructor(message, innerMessage) {\n        super(408, message, innerMessage);\n    }\n}\n\n/**\n * @classdesc HTTP 409 Conflict exception class\n * @class\n */\nexport class HttpConflictError extends HttpError {\n    constructor(message, innerMessage) {\n        super(409, message, innerMessage);\n    }\n}\n\n/**\n * @classdesc HTTP 498 Token Expired exception class\n * @class\n */\nexport class HttpTokenExpiredError extends HttpError {\n    constructor(message, innerMessage) {\n        super(498, message, innerMessage);\n    }\n}\n/**\n * @classdesc HTTP 499 Token Required exception class\n * @class\n */\nexport class HttpTokenRequiredError extends HttpError {\n    constructor(message, innerMessage) {\n        super(499, message, innerMessage);\n    }\n}\n/**\n * @classdesc Represents a 403 HTTP Forbidden error.\n * @class\n */\nexport class HttpForbiddenError extends HttpError {\n    constructor(message, innerMessage) {\n        super(403, message, innerMessage);\n    }\n}\n/**\n * @classdesc Represents a 500 HTTP Internal Server error.\n * @class\n */\nexport class HttpServerError extends HttpError {\n    constructor(message, innerMessage) {\n        super(500, message, innerMessage);\n    }\n}\n/**\n * @classdesc Represents a 503 HTTP Service Unavailable.\n * @class\n */\nexport class HttpServiceUnavailable extends HttpError {\n    constructor(message, innerMessage) {\n        super(503, message, innerMessage);\n    }\n}\n/**\n * @classdesc Extends Error object for throwing exceptions on data operations\n * @class\n * @property {string} code - A string that represents an error code e.g. EDATA\n * @property {string} message -  The error message.\n * @property {string} innerMessage - The error inner message.\n * @property {number} status - A number that represents an error status. This error status may be used for throwing the appropriate HTTP error.\n * @property {*} additionalData - Additional data associated with this error\n */\nexport class DataError extends CodedError {\n    /**\n     * @param {string=} code - A string that represents an error code\n     * @param {string=} message - The error message\n     * @param {string=} innerMessage - The error inner message\n     * @param {string=} model - The target model\n     * @param {string=} field - The target field\n     * @param {*} additionalData - Additional data associated with this error\n     */\n    constructor(code, message, innerMessage, model, field, additionalData) {\n        super(message, code);\n        this.code = code || 'EDATA';\n        if (typeof model !== 'undefined') {\n            this.model = model;\n        }\n        if (typeof field !== 'undefined') {\n            this.field = field;\n        }\n        this.message = message || 'A general data error occured.';\n        if (typeof innerMessage !== 'undefined') {\n            this.innerMessage = innerMessage;\n        }\n        this.additionalData = additionalData;\n    }\n}\n\n/**\n * Thrown when an application attempts to access a data object that cannot be found.\n */\nexport class NotNullError extends DataError {\n    /**\n    * @param {string=} message - The error message\n    * @param {string=} innerMessage - The error inner message\n    * @param {string=} model - The target model\n    * @param {string=} field - The target field\n    */\n    constructor(message, innerMessage, model, field) {\n        super('ENULL', message || 'A value is required.', innerMessage, model, field);\n        this.statusCode = 409;\n    }\n}\n\n/**\n * @classdesc Thrown when an application attempts to access a data object that cannot be found.\n * @class\n */\nexport class DataNotFoundError extends DataError {\n    /**\n    * @param {string=} message - The error message\n    * @param {string=} innerMessage - The error inner message\n    * @param {string=} model - The target model\n    */\n    constructor(message, innerMessage, model) {\n        super('EFOUND', message || 'The requested data was not found.', innerMessage, model);\n        this.statusCode = 404;\n    }\n}\n\n/**\n * @class\n * @classdesc Thrown when a data object operation is denied\n */\nexport class AccessDeniedError extends DataError {\n    /**\n    * @param {string=} message - The error message\n    * @param {string=} innerMessage - The error inner message\n    * @param {string=} model - The target model\n    */\n    constructor(message, innerMessage, model) {\n        super('EACCESS', ('Access Denied' || message), innerMessage, model);\n        this.statusCode = 401;\n    }\n}\n\n/**\n * @class\n * @classdesc Thrown when a unique constraint is being violated\n */\nexport class UniqueConstraintError extends DataError {\n    /**\n    * @param {string=} message - The error message\n    * @param {string=} innerMessage - The error inner message\n    * @param {string=} model - The target model\n    */\n    constructor(message, innerMessage, model) {\n        super('EUNQ', message || 'A unique constraint violated', innerMessage, model);\n        this.statusCode = 409;\n    }\n}\n","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\nimport {sprintf} from \"sprintf\";\n\nconst IS_NODE = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\nconst UUID_CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\nconst HEX_CHARS = 'abcdef1234567890';\nconst STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nconst DATE_TIME_REGEX = /^\\d{4}-([0]\\d|1[0-2])-([0-2]\\d|3[01])(?:[T ](\\d+):(\\d+)(?::(\\d+)(?:\\.(\\d+))?)?)?(?:Z(-?\\d*))?$/g;\nconst BOOLEAN_TRUE_REGEX = /^true$/ig;\nconst BOOLEAN_FALSE_REGEX = /^false$/ig;\nconst NULL_REGEX = /^null$/ig;\nconst UNDEFINED_REGEX = /^undefined$/ig;\nconst INT_REGEX =/^[-+]?\\d+$/g;\nconst FLOAT_REGEX =/^[+-]?\\d+(\\.\\d+)?$/g;\nconst GUID_REGEX = /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;\n\nconst LOG_LEVELS = {\n    error: 0,\n    warn: 1,\n    info: 2,\n    verbose: 3,\n    debug: 4\n};\n\nexport class UnknownPropertyDescriptor {\n    constructor(obj, name) {\n        Object.defineProperty(this, 'value', { \n            configurable:false, \n            enumerable:true, \n            get: function() { \n                    return obj[name]; \n                }, \n            set: function(value) { \n                    obj[name]=value; \n                }\n        });\n        Object.defineProperty(this, 'name', { \n            configurable:false, \n            enumerable:true, \n            get: function() { \n                return name; \n                } \n        });\n    }\n}\n\n\n/**\n * @class\n * @constructor\n */\nexport class LangUtils {\n    /**\n     * Inherit the prototype methods from one constructor into another.\n     * @param {Function} ctor\n     * @param {Function|*} superCtor\n     * @deprecated This method has been deprecated and it will be removed in next version\n     * @example\n    function Animal() {\n        //\n    }\n\n    function Dog() {\n        Dog.super_.bind(this)();\n    }\n    LangUtils.inherits(Dog,Animal);\n     */\n    static inherits(ctor, superCtor) {\n\n        if (typeof superCtor !== \"function\" && superCtor !== null) {\n            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superCtor);\n        }\n\n        //if process is running under node js\n        if (IS_NODE) {\n            const utilModule = \"util\";\n            const util = require(utilModule);\n            //call util.inherits() function\n            return util.inherits(ctor, superCtor);\n        }\n\n        ctor.prototype = Object.create(superCtor && superCtor.prototype, {\n            constructor: {\n                value: ctor,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superCtor) {\n            /**\n             * @function setPrototypeOf\n             * @param {*} obj\n             * @param {*} prototype\n             * @memberOf Object\n             * @static\n             */\n            if (typeof Object.setPrototypeOf === 'function') {\n                Object.setPrototypeOf(ctor, superCtor)\n            }\n            else {\n                ctor.__proto__ = superCtor\n            }\n        }\n        //node.js As an additional convenience, superConstructor will be accessible through the constructor.super_ property.\n        ctor.super_ = ctor.__proto__;\n    }\n\n    /**\n     * Returns an array of strings which represents the arguments' names of the given function\n     * @param {Function} fn\n     * @returns {Array}\n     */\n    static getFunctionParams(fn) {\n        if (typeof fn === 'function')\n            return [];\n        const fnStr = fn.toString().replace(STRIP_COMMENTS, '');\n        const result = fnStr.slice(fnStr.indexOf('(')+1, fnStr.indexOf(')')).match(/([^\\s,]+)/g);\n        if(result === null)\n            result = [];\n        return result;\n    }\n\n    /**\n     * @param {string} value\n     */\n    static convert(value) {\n        var result;\n        if ((typeof value === 'string'))\n        {\n            if (value.length===0) {\n                result = value\n            }\n            if (value.match(BOOLEAN_TRUE_REGEX)) {\n                result = true;\n            }\n            else if (value.match(BOOLEAN_FALSE_REGEX)) {\n                result = false;\n            }\n            else if (value.match(NULL_REGEX) || value.match(UNDEFINED_REGEX)) {\n                result = null;\n            }\n            else if (value.match(INT_REGEX)) {\n                result = parseInt(value);\n            }\n            else if (value.match(FLOAT_REGEX)) {\n                result = parseFloat(value);\n            }\n            else if (value.match(DATE_TIME_REGEX)) {\n                result = new Date(Date.parse(value));\n            }\n            else {\n                result = value;\n            }\n        }\n        else {\n            result = value;\n        }\n        return result;\n    }\n\n    /**\n     *\n     * @param {*} origin\n     * @param {string} expr\n     * @param {string} value\n     * @param {*=} options\n     * @returns {*}\n     */\n    static extend(origin, expr, value, options) {\n\n        options = options || { convertValues:false };\n        //find base notation\n        var match = /(^\\w+)\\[/.exec(expr), name, descriptor, expr1;\n        if (match) {\n            //get property name\n            name = match[1];\n            //validate array property\n            if (/^\\d+$/g.test(name)) {\n                //property is an array\n                if (!Array.isArray(origin.value))\n                    origin.value = [];\n                // get new expression\n                expr1 = expr.substr(match.index + match[1].length);\n                LangUtils.extend(origin, expr1, value, options);\n            }\n            else {\n                //set property value (unknown)\n                origin[name] = origin[name] || new LangUtils();\n                descriptor = new UnknownPropertyDescriptor(origin, name);\n                // get new expression\n                expr1 = expr.substr(match.index + match[1].length);\n                LangUtils.extend(descriptor, expr1, value, options);\n            }\n        }\n        else if (expr.indexOf('[')===0) {\n            //get property\n            var re = /\\[(.*?)\\]/g;\n            match = re.exec(expr);\n            if (match) {\n                name = match[1];\n                // get new expression\n                expr1 = expr.substr(match.index + match[0].length);\n                if (/^\\d+$/g.test(name)) {\n                    //property is an array\n                    if (!Array.isArray(origin.value))\n                        origin.value = [];\n                }\n                if (expr1.length===0) {\n                    if (origin.value instanceof LangUtils) {\n                        origin.value = {};\n                    }\n                    var typedValue;\n                    //convert string value\n                    if ((typeof value === 'string') && options.convertValues) {\n                        typedValue = LangUtils.convert(value);\n                    }\n                    else {\n                        typedValue = value;\n                    }\n                    if (Array.isArray(origin.value))\n                        origin.value.push(typedValue);\n                    else\n                        origin.value[name] = typedValue;\n                }\n                else {\n                    if (origin.value instanceof LangUtils) {\n                        origin.value = { };\n                    }\n                    origin.value[name] = origin.value[name] || new LangUtils();\n                    descriptor = new UnknownPropertyDescriptor(origin.value, name);\n                    LangUtils.extend(descriptor, expr1, value, options);\n                }\n            }\n            else {\n                throw new Error('Invalid object property notation. Expected [name]');\n            }\n        }\n        else if (/^\\w+$/.test(expr)) {\n            if (options.convertValues)\n                origin[expr] = LangUtils.convert(value);\n            else\n                origin[expr] = value;\n        }\n        else {\n            throw new Error('Invalid object property notation. Expected property[name] or [name]');\n        }\n        return origin;\n    }\n\n    /**\n     *\n     * @param {*} form\n     * @param {*=} options\n     * @returns {*}\n     */\n    static parseForm(form, options) {\n        const result = {};\n        if (typeof form === 'undefined' || form===null)\n            return result;\n        const keys = Object.keys(form);\n        keys.forEach(key => {\n            if (form.hasOwnProperty(key))\n            {\n                LangUtils.extend(result, key, form[key], options)\n            }\n        });\n        return result;\n    }\n\n    /**\n     * Parses any value or string and returns the resulted object.\n     * @param {*} any\n     * @returns {*}\n     */\n    static parseValue(any) {\n        return LangUtils.convert(any);\n    }\n\n    /**\n     * Parses any value and returns the equivalent integer.\n     * @param {*} any\n     * @returns {*}\n     */\n    static parseInt(any) {\n        return parseInt(any) || 0;\n    }\n\n    /**\n     * Parses any value and returns the equivalent float number.\n     * @param {*} any\n     * @returns {*}\n     */\n    static parseFloat(any) {\n        return parseFloat(any) || 0;\n    }\n\n    /**\n     * Parses any value and returns the equivalent boolean.\n     * @param {*} any\n     * @returns {*}\n     */\n    static parseBoolean(any) {\n        if (typeof any === 'undefined' || any === null)\n            return false;\n        else if (typeof any === 'number')\n            return any !== 0;\n        else if (typeof any === 'string') {\n            if (any.match(INT_REGEX) || any.match(FLOAT_REGEX)) {\n                return parseInt(any, 10) !== 0;\n            }\n            else if (any.match(BOOLEAN_TRUE_REGEX))\n                return true;\n            else if (any.match(BOOLEAN_FALSE_REGEX))\n                return false;\n            else if (/^yes$|^on$|^y$|^valid$/i.test(any))\n                return true;\n            else if (/^no$|^off$|^n$|^invalid$/i.test(any))\n                return false;\n            else\n                return false;\n        }\n        else if (typeof any === 'boolean')\n            return any;\n        else {\n            return (parseInt(any) || 0) !== 0;\n        }\n    }\n\n    /**\n     * @static\n     * Checks if the given value is a valid date\n     * @param {*} value\n     * @returns {boolean}\n     */\n    static isDate(value) {\n        if (value instanceof Date) {\n            return true;\n        }\n        return DATE_TIME_REGEX.test(value);\n    }\n}\n\n/**\n * @function captureStackTrace\n * @memberOf Error\n * @param {Error} thisArg\n * @param {string} name\n * @static\n */\n\n/**\n * @class\n * @constructor\n */\nexport class Args {\n    /**\n     * Checks the expression and throws an exception if the condition is not met.\n     * @param {*} expr\n     * @param {string|Error} err\n     */\n    static check(expr, err) {\n        Args.notNull(expr,\"Expression\");\n        var res;\n        if (typeof expr === 'function') {\n            res = !(expr.call());\n        }\n        else {\n            res = (!expr);\n        }\n        if (res) {\n            if (err instanceof Error) {\n                throw err;\n            }\n            throw new ArgumentError(err, \"ECHECK\");\n        }\n    }\n\n    /**\n     *\n     * @param {*} arg\n     * @param {string} name\n     */\n    static notNull(arg, name) {\n        if (typeof arg === 'undefined' || arg === null) {\n            throw new ArgumentError(name + \" may not be null or undefined\", \"ENULL\");\n        }\n    }\n\n    /**\n     * @param {*} arg\n     * @param {string} name\n     */\n    static notString(arg, name) {\n        if (typeof arg !== 'string') {\n            throw new ArgumentError(name + \" must be a string\", \"EARG\");\n        }\n    }\n\n    /**\n     * @param {*} arg\n     * @param {string} name\n     */\n    static notFunction(arg, name) {\n        if (typeof arg !== 'function') {\n            throw new ArgumentError(name + \" must be a function\", \"EARG\");\n        }\n    }\n\n    /**\n     * @param {*} arg\n     * @param {string} name\n     */\n    static notNumber(arg, name) {\n        if ((typeof arg !== 'number') || isNaN(arg)) {\n            throw new ArgumentError(name + \" must be number\", \"EARG\");\n        }\n    }\n\n    /**\n     * @param {string|*} arg\n     * @param {string} name\n     */\n    static notEmpty(arg, name) {\n        Args.notNull(arg,name);\n        if ((Object.prototype.toString.bind(arg)() === '[object Array]') && (arg.length === 0)) {\n            throw new ArgumentError(name + \" may not be empty\",\"EEMPTY\");\n        }\n        else if ((typeof arg === 'string') && (arg.length===0)) {\n            throw new ArgumentError(name + \" may not be empty\",\"EEMPTY\");\n        }\n    }\n\n    /**\n     * @param {number|*} arg\n     * @param {string} name\n     */\n    static notNegative(arg, name) {\n        Args.notNumber(arg,name);\n        if (arg<0) {\n            throw new ArgumentError(name + \" may not be negative\", \"ENEG\");\n        }\n    }\n\n    /**\n     * @param {number|*} arg\n     * @param {string} name\n     */\n    static notPositive(arg, name) {\n        Args.notNumber(arg,name);\n        if (arg<=0) {\n            throw new ArgumentError(name + \" may not be negative or zero\", \"EPOS\");\n        }\n    }\n}\n\n/**\n * @class\n * @constructor\n */\nexport class TextUtils {\n    /**\n     * Converts the given parameter to MD5 hex string\n     * @static\n     * @param {*} value\n     * @returns {string|undefined}\n     */\n    static toMD5(value) {\n\n        if (typeof value === 'undefined' || value === null) {\n            return;\n        }\n        //browser implementation\n        var md5, md5module;\n        if (typeof window !== 'undefined') {\n            md5module = 'blueimp-md5';\n            md5 = require(md5module);\n            if (typeof value === 'string') {\n                return md5(value);\n            }\n            else if (value instanceof Date) {\n                return md5(value.toUTCString());\n            }\n            else {\n                return md5(JSON.stringify(value));\n            }\n        }\n        //node.js implementation\n        md5module = 'crypto';\n        var crypto = require(md5module);\n        md5 = crypto.createHash('md5');\n        if (typeof value === 'string') {\n            md5.update(value);\n        }\n        else if (value instanceof Date) {\n            md5.update(value.toUTCString());\n        }\n        else {\n            md5.update(JSON.stringify(value));\n        }\n        return md5.digest('hex');\n    }\n\n    /**\n     * Converts the given parameter to SHA1 hex string\n     * @static\n     * @param {*} value\n     * @returns {string|undefined}\n     */\n    static toSHA1(value) {\n\n        var cryptoModule = 'crypto';\n        if (typeof window !== 'undefined') {\n            throw new Error('This method is not implemented for this environment')\n        }\n\n        var crypto = require(cryptoModule);\n        if (typeof value === 'undefined' || value === null) {\n            return;\n        }\n        var sha1 = crypto.createHash('sha1');\n        if (typeof value === 'string') {\n            sha1.update(value);\n        }\n        else if (value instanceof Date) {\n            sha1.update(value.toUTCString());\n        }\n        else {\n            sha1.update(JSON.stringify(value));\n        }\n        return sha1.digest('hex');\n    }\n\n    /**\n     * Converts the given parameter to SHA256 hex string\n     * @static\n     * @param {*} value\n     * @returns {string|undefined}\n     */\n    static toSHA256(value) {\n\n        var cryptoModule = 'crypto';\n        if (typeof window !== 'undefined') {\n            throw new Error('This method is not implemented for this environment')\n        }\n\n        var crypto = require(cryptoModule);\n        if (typeof value === 'undefined' || value === null) {\n            return;\n        }\n        var sha256 = crypto.createHash('sha256');\n        if (typeof value === 'string') {\n            sha256.update(value);\n        }\n        else if (value instanceof Date) {\n            sha256.update(value.toUTCString());\n        }\n        else {\n            sha256.update(JSON.stringify(value));\n        }\n        return sha256.digest('hex');\n    }\n\n    /**\n     * Returns a random GUID/UUID string\n     * @static\n     * @returns {string}\n     */\n    static newUUID() {\n        var chars = UUID_CHARS;\n        var uuid = [];\n        // rfc4122, version 4 form\n        var r = void 0;\n        // rfc4122 requires these characters\n        uuid[8] = uuid[13] = uuid[18] = uuid[23] = \"-\";\n        uuid[14] = \"4\";\n\n        // Fill in random data.  At i==19 set the high bits of clock sequence as\n        // per rfc4122, sec. 4.1.5\n        for (var i = 0; i < 36; i++) {\n            if (!uuid[i]) {\n                r = 0 | Math.random() * 16;\n                uuid[i] = chars[i === 19 ? r & 0x3 | 0x8 : r];\n            }\n        }\n        return uuid.join(\"\");\n    }\n}\n\n/**\n * @class\n * @constructor\n */\nexport class TraceUtils {\n    static useLogger(logger) {\n        TraceUtils._logger = logger;\n    }\n\n    static level(level) {\n        TraceUtils._logger.level(level);\n    }\n\n    /**\n     * @static\n     * @param {...*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static log(_data) {\n        TraceUtils._logger.log.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n\n    /**\n     * @static\n     * @param {...*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static error(_data) {\n        TraceUtils._logger.error.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n\n    /**\n     *\n     * @static\n     * @param {...*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static info(_data) {\n        TraceUtils._logger.info.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n\n    /**\n     *\n     * @static\n     * @param {*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static warn(_data) {\n        TraceUtils._logger.warn.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n\n    /**\n     *\n     * @static\n     * @param {*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static verbose(_data) {\n        TraceUtils._logger.verbose.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n\n    /**\n     *\n     * @static\n     * @param {...*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static debug(_data) {\n        TraceUtils._logger.debug.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n}\nObject.defineProperty(TraceUtils, '_logger', {\n    enumerable: false,\n    configurable: false,\n    value: new TraceLogger()\n});\n\n\n/**\n * @class\n * @constructor\n */\nexport class RandomUtils {\n    /**\n     * Returns a random string based on the length specified\n     * @param {Number} length\n     */\n    static randomChars(length) {\n        length = length || 8;\n        var chars = \"abcdefghkmnopqursuvwxz2456789ABCDEFHJKLMNPQURSTUVWXYZ\";\n        var str = \"\";\n        for(var i = 0; i < length; i++) {\n            str += chars.substr(this.randomInt(0, chars.length-1),1);\n        }\n        return str;\n    }\n\n    /**\n     * Returns a random integer between a minimum and a maximum value\n     * @param {number} min\n     * @param {number} max\n     */\n    static randomInt(min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n\n    /**\n     * Returns a random string based on the length specified\n     * @static\n     * @param {number} length\n     * @returns {string}\n     */\n    static randomHex(length) {\n        length = (length || 8)*2;\n        var str = \"\";\n        for(var i = 0; i < length; i++) {\n            str += HEX_CHARS.substr(this.randomInt(0, HEX_CHARS.length-1),1);\n        }\n        return str;\n    }\n}\n\n/**\n * @class\n * @constructor\n */\nexport class NumberUtils {\n    /**\n     * Converts a base-26 formatted string to the equivalent integer\n     * @static\n     * @param {string} s A base-26 formatted string e.g. aaaaaaaa for 0, baaaaaaa for 1 etc\n     * @return {number} The equivalent integer value\n     */\n    static fromBase26(s) {\n        var num = 0;\n        if (!/[a-z]{8}/.test(s)) {\n            throw new Error('Invalid base-26 format.');\n        }\n        var a = 'a'.charCodeAt(0);\n        for (var i = 7; i >=0; i--) {\n            num = (num * 26) + (s[i].charCodeAt(0) - a);\n        }\n        return num;\n    }\n\n    /**\n     * Converts an integer to the equivalent base-26 formatted string\n     * @static\n     * @param {number} x The integer to be converted\n     * @return {string} The equivalent string value\n     */\n    static toBase26(x) {\n        //noinspection ES6ConvertVarToLetConst\n        var num = parseInt(x);\n        if (num<0) {\n            throw new Error('A non-positive integer cannot be converted to base-26 format.');\n        }\n        if (num>208827064575) {\n            throw new Error('A positive integer bigger than 208827064575 cannot be converted to base-26 format.');\n        }\n        var out = \"\";\n        var length= 1;\n        var a = 'a'.charCodeAt(0);\n        while(length<=8)\n        {\n            out += String.fromCharCode(a + (num % 26));\n            num = Math.floor(num / 26);\n            length += 1;\n        }\n        return out;\n    }\n}\n\n/**\n * @class\n * @constructor\n */\nexport class PathUtils {\n    /**\n     *\n     * @param {...string} _part\n     * @returns {string}\n     */\n    // eslint-disable-next-line no-unused-vars\n    static join(_part) {\n        var pathModule = \"path\";\n        if (IS_NODE) {\n            var path = require(pathModule);\n            return path.join.apply(null, Array.prototype.slice.call(arguments));\n        }\n        // Split the inputs into a list of path commands.\n        var parts = [], i, l;\n        for (i = 0, l = arguments.length; i < l; i++) {\n            parts = parts.concat(arguments[i].split(\"/\"));\n        }\n    // Interpret the path commands to get the new resolved path.\n        var newParts = [];\n        for (i = 0, l = parts.length; i < l; i++) {\n            var part1 = parts[i];\n            // Remove leading and trailing slashes\n            // Also remove \".\" segments\n            if (!part1 || part1 === \".\") continue;\n            // Interpret \"..\" to pop the last segment\n            if (part1 === \"..\") newParts.pop();\n            // Push new path segments.\n            else newParts.push(part1);\n        }\n    // Preserve the initial slash if there was one.\n        if (parts[0] === \"\") newParts.unshift(\"\");\n    // Turn back into a single string path.\n        return newParts.join(\"/\") || (newParts.length ? \"/\" : \".\");\n    }\n}\n\n/**\n * @private\n * @returns {string}\n */\nfunction timestamp() {\n    return (new Date()).toUTCString();\n}\n\n/**\n * @private\n * @this TraceLogger\n * @param level\n * @param err\n */\nfunction writeError(level, err) {\n\n    var keys = Object.keys(err).filter( x => {\n        return err.hasOwnProperty(x) && x!=='message' && typeof err[x] !== 'undefined' && err[x] != null;\n    });\n    if (err instanceof Error) {\n        if (err.hasOwnProperty('stack')) {\n            this.write(level, err.stack);\n        }\n        else {\n            this.write(level, err.toString());\n        }\n    }\n    else {\n        this.write(level, err.toString());\n    }\n    if (keys.length>0) {\n        this.write(level, \"Error: \" + keys.map( x => {\n            return \"[\" + x + \"]=\" + err[x].toString()\n        }).join(', '));\n    }\n}\n\n/**\n * @class\n * @param {*} options\n * @constructor\n */\nexport class TraceLogger {\n    constructor(options) {\n        this.options = {\n            colors:false,\n            level:\"info\"\n        };\n        if (typeof options === \"undefined\" && options !== null && IS_NODE) {\n            if (IS_NODE && process.env.NODE_ENV === \"development\") {\n                this.options.level = \"debug\";\n            }\n        }\n        if (typeof options !== \"undefined\" && options !== null ) {\n            this.options = options;\n            //validate logging level\n            Args.check(LOG_LEVELS.hasOwnProperty(this.options.level), \"Invalid logging level. Expected error, warn, info, verbose or debug.\");\n        }\n    }\n\n    /**\n     * @param {string} level\n     * @returns {*}\n     */\n    level(level) {\n        Args.check(LOG_LEVELS.hasOwnProperty(level), \"Invalid logging level. Expected error, warn, info, verbose or debug.\");\n        this.options.level = level;\n        return this;\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    log(data) {\n        var args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"info\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"info\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"info\", sprintf.apply(null, args));\n        }\n        this.write(\"info\", data);\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    info(data) {\n        var args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"info\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"info\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"info\", sprintf.apply(null, args));\n        }\n        this.write(\"info\", data);\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    error(data) {\n        var args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"error\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"error\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"error\", sprintf.apply(null, args));\n        }\n        this.write(\"error\", data);\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    warn(data) {\n        var args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"warn\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"warn\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"warn\", sprintf.apply(null, args));\n        }\n        this.write(\"warn\", data);\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    verbose(data) {\n        var args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"verbose\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"verbose\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"verbose\", sprintf.apply(null, args));\n        }\n        this.write(\"verbose\", data);\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    debug(data) {\n        var args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"debug\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"debug\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"debug\", sprintf.apply(null, args));\n        }\n        this.write(\"debug\", data);\n\n    }\n\n    write(level, text) {\n        if (LOG_LEVELS[level]>LOG_LEVELS[this.options.level]) {\n            return;\n        }\n        // eslint-disable-next-line no-console\n        console.log(timestamp() + \" [\" + level.toUpperCase() + \"] \" + text);\n    }\n}\n\n/**\n * @param {number} value\n * @constructor\n */\nexport class Base26Number {\n\n    constructor(value) {\n        var thisValue = value;\n        this.toString = () => {\n            return Base26Number.toBase26(thisValue);\n        }\n    }\n\n    /**\n     *\n     * @param {number} x\n     * @returns {string}\n     */\n    static toBase26(x) {\n        var num = Math.floor(x | 0);\n        if (num<0) {\n            throw new Error(\"A non-positive integer cannot be converted to base-26 format.\");\n        }\n        if (num>208827064575) {\n            throw new Error(\"A positive integer bigger than 208827064575 cannot be converted to base-26 format.\");\n        }\n        var out = \"\";\n        var length= 1;\n        var a = \"a\".charCodeAt(0);\n        while(length<=8) {\n            out += String.fromCharCode(a + (num % 26));\n            num = Math.floor(num / 26);\n            length += 1;\n        }\n        return out;\n    }\n\n    /**\n     *\n     * @param {string} s\n     * @returns {number}\n     */\n    static fromBase26(s) {\n        var num = 0;\n        if (!/[a-z]{8}/.test(s)) {\n            throw new Error(\"Invalid base-26 format.\");\n        }\n        var a = \"a\".charCodeAt(0);\n        for (var i = 7; i >=0; i--) {\n            num = (num * 26) + (s[i].charCodeAt(0) - a);\n        }\n        return num;\n    }\n}\n\n/**\n * @class\n * @param {string=} value\n * @constructor\n */\nexport class Guid {\n    constructor(value) {\n        let _value;\n        if (typeof value === \"string\") {\n            // format value\n            _value = value.replace(/^{/,\"\").replace(/{$/,\"\");\n            // and validate\n            Args.check(GUID_REGEX.test(_value),\"Value must be a valid UUID\");\n        }\n        else {\n            // generate a new guid string\n            _value = TextUtils.newUUID();\n        }\n        // define property\n        Object.defineProperty(this, '_value', {\n                enumerable: false,\n                configurable: true,\n                value: test\n            });\n    }\n\n    toJSON() {\n        return this._value;\n    }\n\n    valueOf() {\n        return this._value;\n    }\n\n    toString() {\n        return this._value;\n    }\n\n    /**\n     * @param {string|*} s\n     * @returns {boolean}\n     */\n    static isGuid(s) {\n        if (s instanceof Guid) {\n            return true;\n        }\n        if (typeof s !== \"string\") {\n            return false;\n        }\n        return GUID_REGEX.test(s);\n    }\n\n    /**\n     * @returns {Guid}\n     */\n    static newGuid() {\n        return new Guid();\n    }\n}\n\nexport class ArgumentError extends TypeError {\n    /**\n    * @param {string} msg\n    * @param {string} code\n    */\n    constructor(msg, code) {\n        this.message = msg;\n        this.code = code || \"ERR_ARG\";\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\nimport _ from 'lodash';\nimport {Args} from './utils';\nimport {TraceUtils} from './utils';\nimport {PathUtils} from './utils';\nimport {AbstractClassError} from './errors';\n\n/**\n * @class Represents an application configuration\n * @param {string=} configPath\n * @property {*} settings\n * @constructor\n */\nexport class ConfigurationBase {\n    constructor(configPath) {\n        \n        // set strategies\n        Object.defineProperty(this, '_strategies', {\n            enumerable: false,\n            writable: false,\n            value: { }\n        });\n\n        // set configuration path\n        Object.defineProperty(this, '_configurationPath', {\n            enumerable: false,\n            writable: false,\n            value: configPath || PathUtils.join(process.cwd(),'config')\n        });\n        TraceUtils.debug('Initializing configuration under %s.', this._configurationPath);\n\n        // set execution path\n        Object.defineProperty(this, '_executionPath', {\n            enumerable: false,\n            writable: false,\n            value: PathUtils.join(this._configurationPath,'..')\n        });\n        TraceUtils.debug('Setting execution path under %s.', this._executionPath);\n\n        // set config source\n        // set execution path\n        Object.defineProperty(this, '_config', {\n            enumerable: false,\n            configurable: false,\n            value: { }\n        });\n\n        //load default module loader strategy\n        this.useStrategy(ModuleLoaderStrategy, DefaultModuleLoaderStrategy);\n\n        //get configuration source\n        let configSourcePath;\n        try {\n            let env = 'production';\n            //node.js mode\n            if (process && process.env) {\n                env = process.env['NODE_ENV'] || 'production';\n            }\n            //browser mode\n            else if (window && window.env) {\n                env = window.env['BROWSER_ENV'] || 'production';\n            }\n            configSourcePath = PathUtils.join(this._configurationPath, 'app.' + env + '.json');\n            TraceUtils.debug('Validating environment configuration source on %s.', configSourcePath);\n            this._config = require(configSourcePath);\n        }\n        catch (err) {\n            if (err.code === 'MODULE_NOT_FOUND') {\n                TraceUtils.log('The environment specific configuration cannot be found or is inaccesible.');\n                try {\n                    configSourcePath = PathUtils.join(this._configurationPath, 'app.json');\n                    TraceUtils.debug('Validating application configuration source on %s.', configSourcePath);\n                    this._config = require(configSourcePath);\n                }\n                catch(err) {\n                    if (err.code === 'MODULE_NOT_FOUND') {\n                        TraceUtils.log('The default application configuration cannot be found or is inaccesible.');\n                    }\n                    else {\n                        TraceUtils.error('An error occured while trying to open default application configuration.');\n                        TraceUtils.error(err);\n                    }\n                    TraceUtils.debug('Initializing empty configuration');\n                    this._config = { };\n                }\n            }\n            else {\n                TraceUtils.error('An error occured while trying to open application configuration.');\n                TraceUtils.error(err);\n                //load default configuration\n                this._config = { };\n            }\n        }\n        //initialize settings object\n        this._config['settings'] = this._config['settings'] || { };\n\n        /**\n         * @name ConfigurationBase#settings\n         * @type {*}\n         */\n\n        Object.defineProperty(this, 'settings',{\n            get: function() {\n                return this._config['settings'];\n        },\n            enumerable:true,\n            configurable:false});\n\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the configuration source object\n     * @returns {*}\n     */\n    getSource() {\n        return this._config;\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the source configuration object based on the given path (e.g. settings.auth.cookieName or settings/auth/cookieName)\n     * @param {string} p - A string which represents an object path\n     * @returns {Object|Array}\n     */\n    getSourceAt(p) {\n        return _.at(this._config,p.replace(/\\//g,'.'))[0];\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns a boolean which indicates whether the specified  object path exists or not (e.g. settings.auth.cookieName or settings/auth/cookieName)\n     * @param {string} p - A string which represents an object path\n     * @returns {boolean}\n     */\n    hasSourceAt(p) {\n        return _.isObject(_.at(this._config,p.replace(/\\//g,'.'))[0]);\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Sets the config value to the specified object path (e.g. settings.auth.cookieName or settings/auth/cookieName)\n     * @param {string} p - A string which represents an object path\n     * @param {*} value\n     * @returns {Object}\n     */\n    setSourceAt(p, value) {\n        return _.set(this._config, p.replace(/\\//g,'.'), value);\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Sets the current execution path\n     * @param {string} p\n     * @returns ConfigurationBase\n     */\n    setExecutionPath(p) {\n        this._executionPath = p;\n        return this;\n    }\n\n    /**\n     * Gets the current execution path\n     * @returns {string}\n     */\n    getExecutionPath() {\n        return this._executionPath;\n    }\n\n    /**\n     * Gets the current configuration path\n     * @returns {string}\n     */\n    getConfigurationPath() {\n        return this._configurationPath;\n    }\n\n    /**\n     * Register a configuration strategy\n     * @param {Function} configStrategyCtor\n     * @param {Function} strategyCtor\n     * @returns ConfigurationBase\n     */\n    useStrategy(configStrategyCtor, strategyCtor) {\n        Args.notFunction(configStrategyCtor,\"Configuration strategy constructor\");\n        Args.notFunction(strategyCtor,\"Strategy constructor\");\n        this._strategies[\"$\".concat(configStrategyCtor.name)] = new strategyCtor(this);\n        return this;\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Gets a configuration strategy\n     * @param {Function} configStrategyCtor\n     */\n    getStrategy(configStrategyCtor) {\n        Args.notFunction(configStrategyCtor,\"Configuration strategy constructor\");\n        return this._strategies[\"$\".concat(configStrategyCtor.name)];\n    }\n\n    /**\n     * Gets a configuration strategy\n     * @param {Function} configStrategyCtor\n     */\n    hasStrategy(configStrategyCtor) {\n        Args.notFunction(configStrategyCtor,\"Configuration strategy constructor\");\n        return typeof this._strategies[\"$\".concat(configStrategyCtor.name)] !== 'undefined';\n    }\n\n    /**\n     * Gets the current configuration\n     * @returns ConfigurationBase - An instance of DataConfiguration class which represents the current data configuration\n     */\n    static getCurrent() {\n        if (ConfigurationBase._currentConfiguration == null) {\n            ConfigurationBase._currentConfiguration = new ConfigurationBase();\n        }\n        return ConfigurationBase._currentConfiguration;\n    }\n\n    /**\n     * Sets the current configuration\n     * @param {ConfigurationBase} configuration\n     * @returns ConfigurationBase - An instance of ApplicationConfiguration class which represents the current configuration\n     */\n    static setCurrent(configuration) {\n        if (configuration instanceof ConfigurationBase) {\n            if (!configuration.hasStrategy(ModuleLoaderStrategy)) {\n                configuration.useStrategy(ModuleLoaderStrategy, DefaultModuleLoaderStrategy);\n            }\n            ConfigurationBase._currentConfiguration = configuration;\n            return ConfigurationBase._currentConfiguration;\n        }\n        throw new TypeError('Invalid argument. Expected an instance of DataConfiguration class.');\n    }\n}\n\nObject.defineProperty(ConfigurationBase, '_currentConfiguration', {\n    enumerable: false,\n    configurable: false,\n    value: null\n});\n\n/**\n * @class\n * @param {ConfigurationBase} config\n * @constructor\n * @abstract\n */\nexport class ConfigurationStrategy {\n    constructor(config) {\n        Args.check(this.constructor.name !== ConfigurationStrategy, new AbstractClassError());\n        Args.notNull(config, 'Configuration');\n        this._config = config;\n    }\n\n    /**\n     * @returns {ConfigurationBase}\n     */\n    getConfiguration() {\n        return this._config;\n    }\n}\n\n/**\n * @class\n * @constructor\n * @param {ConfigurationBase} config\n * @extends ConfigurationStrategy\n */\nexport class ModuleLoaderStrategy extends ConfigurationStrategy {\n    constructor(config) {\n        super(config);\n    }\n\n    require(modulePath) {\n        Args.notEmpty(modulePath,'Module Path');\n        if (!/^.\\//i.test(modulePath)) {\n            if (require.resolve && require.resolve.paths) {\n                /**\n                 * get require paths collection\n                 * @type string[]\n                 */\n                let paths = require.resolve.paths(modulePath);\n                //get execution\n                let path1 = this.getConfiguration().getExecutionPath();\n                //loop directories to parent (like classic require)\n                while (path1) {\n                    //if path does not exist in paths collection\n                    if (paths.indexOf(PathUtils.join(path1,'node_modules'))<0) {\n                        //add it\n                        paths.push(PathUtils.join(path1,'node_modules'));\n                        //and check the next path which is going to be resolved\n                        if (path1 === PathUtils.join(path1,'..')) {\n                            //if it is the same with the current path break loop\n                            break;\n                        }\n                        //otherwise get parent path\n                        path1 = PathUtils.join(path1,'..');\n                    }\n                    else {\n                        //path already exists in paths collection, so break loop\n                        break;\n                    }\n                }\n                let finalModulePath = require.resolve(modulePath, {\n                    paths:paths\n                });\n                return require(finalModulePath);\n            }\n            else {\n                return require(modulePath);\n            }\n        }\n        return require(PathUtils.join(this.getConfiguration().getExecutionPath(),modulePath));\n    }\n}\n\n/**\n * @classdesc\n * @extends ModuleLoaderStrategy\n */\nexport class DefaultModuleLoaderStrategy extends ModuleLoaderStrategy {\n    /**\n    * @param {ConfigurationBase} config\n    */\n    constructor(config) {\n        super(config);\n    }\n}\n\n\n","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\nimport _ from 'lodash';\n\n// eslint-disable-next-line no-unused-vars\n// tslint:disable-next-line:no-unused-variable\nconst HTML_START_CHAR = '<';\nconst HTML_END_CHAR = '>';\nconst HTML_FULL_END_STRING = ' />';\nconst HTML_SPACE_CHAR = ' ';\nconst HTML_ATTR_STRING = '%0=\"%1\"';\nconst HTML_START_TAG_STRING = '<%0';\nconst HTML_END_TAG_STRING = '</%0>';\n\n\n/**\n * @classdesc HtmlWriter class represents a helper class for rendering HTML content.\n * @class\n * @constructor\n */\nexport class HtmlWriter {\n    constructor() {\n        /**\n         * @private\n         * @type {Array}\n         */\n        this.bufferedAttributes=[];\n        /**\n         * @private\n         * @type {Array}\n         */\n        this.bufferedTags = [];\n        /**\n         * @private\n         * @type {String}\n         */\n        this.buffer = '';\n        /**\n         * @private\n         * @type {Integer}\n         */\n        this.indent = true;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Writes an attribute to an array of attributes that is going to be used in writeBeginTag function\n     * @param {String} name - The name of the HTML attribute\n     * @param {String} value - The value of the HTML attribute\n     * @returns {HtmlWriter}\n     */\n    writeAttribute(name, value) {\n        this.bufferedAttributes.push({name:name, value:value});\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Writes an array of attributes to the output buffer. This attributes are going to be rendered after writeBeginTag or WriteFullBeginTag function call.\n     * @param {Array|Object} obj - An array of attributes or an object that represents an array of attributes\n     * @returns {HtmlWriter}\n     */\n    writeAttributes(obj) {\n        if (obj===null)\n            return this;\n        if (Array.isArray(obj)) {\n            for (let i = 0; i < obj.length; i++) {\n                this.bufferedAttributes.push( { name:obj[i].name, value:obj[i].value } );\n            }\n        }\n        else {\n            for (let prop in obj)\n            {\n                if (obj.hasOwnProperty(prop)) {\n                    if (obj[prop]!==null) {\n                        this.bufferedAttributes.push( { name:prop, value:obj[prop] } );\n                    }\n                }\n            }\n        }\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * @param {String} tag\n     * @returns {HtmlWriter}\n     */\n    writeBeginTag(tag) {\n        //write <TAG\n        if (this.indent)\n        {\n            //this.buffer += '\\n';\n            this.buffer += '\\t'.repeat(this.bufferedTags.length);\n        }\n        this.buffer += HTML_START_TAG_STRING.replace(/%0/, tag);\n        this.bufferedTags.push(tag);\n        if (this.bufferedAttributes.length>0)\n        {\n            let s = '';\n            this.bufferedAttributes.forEach(attr => {\n                //write attribute='value'\n                s += HTML_SPACE_CHAR;\n                s += HTML_ATTR_STRING.replace(/%0/,attr.name).replace(/%1/, _.escape(attr.value));\n            });\n            this.buffer += s;\n        }\n        this.bufferedAttributes.splice(0,this.bufferedAttributes.length);\n        this.buffer += HTML_END_CHAR;\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Writes a full begin HTML tag (e.g <div/>).\n     * @param {String} tag\n     * @returns {HtmlWriter}\n     */\n    writeFullBeginTag(tag) {\n        //write <TAG\n        if (this.indent)\n        {\n            this.buffer += '\\n';\n            this.buffer +=_.repeat('\\t', this.bufferedTags.length);\n        }\n        this.buffer += HTML_START_TAG_STRING.replace(/%0/, tag);\n        if (this.bufferedAttributes.length>0)\n        {\n            let s = '';\n            this.bufferedAttributes.forEach( attr => {\n                //write attribute='value'\n                s += HTML_SPACE_CHAR;\n                s += HTML_ATTR_STRING.replace(/%0/,attr.name).replace(/%1/, _.escape(attr.value));\n            });\n            this.buffer += s;\n        }\n        this.bufferedAttributes.splice(0,this.bufferedAttributes.length);\n        this.buffer += HTML_FULL_END_STRING;\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Writes an end HTML tag (e.g </div>) based on the current buffered tags.\n     * @returns {HtmlWriter}\n     */\n    writeEndTag() {\n        const tagsLength = this.bufferedTags ? this.bufferedTags.length : 0;\n        if (tagsLength===0)\n            return this;\n        if (this.indent)\n        {\n            this.buffer += '\\n';\n            this.buffer +=_.repeat('\\t', tagsLength-1);\n        }\n        this.buffer += HTML_END_TAG_STRING.replace(/%0/,this.bufferedTags[tagsLength-1]);\n        this.bufferedTags.splice(tagsLength-1,1);\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     *\n     * @param {String} s\n     * @returns {HtmlWriter}\n     */\n    writeText(s) {\n        if (!s)\n            return this;\n        if (this.indent)\n        {\n            this.buffer += '\\n';\n            this.buffer +=_.repeat('\\t', this.bufferedTags.length);\n        }\n        this.buffer += _.escape(s);\n        return this;\n    }\n\n    /**\n     *\n     * @param {String} s\n     * @returns {HtmlWriter}\n     */\n    write(s) {\n        this.buffer += s;\n        return this;\n    }\n\n    /**\n     * @returns {String}\n     */\n    toString() {\n        return this.buffer;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * @param {function} fn\n     */\n    writeTo(fn) {\n        if (typeof fn === 'function') {\n            //call function\n            fn(this.buffer);\n            //and clear buffer\n            this.buffer='';\n            //and clear buffered tags\n            this.bufferedTags.splice(0,this.bufferedTags.length);\n        }\n    }\n}\n","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\nimport {AbstractMethodError} from \"./errors\";\nimport {AbstractClassError} from \"./errors\";\n\n/**\n *\n * @class\n * @abstract\n * @param {string=} configPath\n */\nclass IApplication {\n    // eslint-disable-next-line no-unused-vars\n    constructor(_configPath) {\n        if (this.constructor === IApplication.prototype.constructor) {\n            throw new AbstractClassError();\n        }\n    }\n\n    /**\n     * Registers an application strategy e.g. an singleton service which to be used in application contextr\n     * @param {Function} serviceCtor\n     * @param {Function} strategyCtor\n     * @returns IApplication\n     */\n    // eslint-disable-next-line no-unused-vars\n    useStrategy(serviceCtor, strategyCtor) {\n        throw new AbstractMethodError();\n    }\n\n    /**\n    * @param {Function} serviceCtor\n    * @returns {boolean}\n    */\n    // eslint-disable-next-line no-unused-vars\n    hasStrategy(serviceCtor) {\n        throw new AbstractMethodError();\n    }\n\n    /**\n     * Gets an application strategy based on the given base service type\n     * @param {Function} serviceCtor\n     * @return {*}\n     */\n    // eslint-disable-next-line no-unused-vars\n    getStrategy(serviceCtor) {\n        throw new AbstractMethodError();\n    }\n\n    /**\n     * @returns {ConfigurationBase}\n     */\n    getConfiguration() {\n        throw new AbstractMethodError();\n    }\n}\n\n/**\n *\n * @class\n * @abstract\n * @param {IApplication} app\n */\n// eslint-disable-next-line no-unused-vars\nclass IApplicationService {\n    constructor(app) {\n        if (this.constructor === IApplicationService.prototype.constructor) {\n            throw new AbstractClassError();\n        }\n    }\n    /**\n     * @returns {IApplication}\n     */\n    getApplication() {\n        throw new AbstractMethodError();\n    }\n}\n\n\n/**\n * @classdesc Represents an application service\n * @class\n */\n// eslint-disable-next-line no-unused-vars\nclass ApplicationService extends IApplication {\n    /**\n     * @param {IApplication} app\n     */\n    constructor(app) {\n        super(app);\n        Object.defineProperty(this, '_app', {\n            enumerable: false,\n            writable: false,\n            value: app\n        });\n    }\n\n    /**\n     * @returns {IApplication}\n     */\n    getApplication() {\n        return this._app;\n    }\n}\n\nexport {IApplication};\nexport {IApplicationService};\nexport {ApplicationService};\n"],"names":["SequentialEventEmitter","event","_args","callback","listeners","Error","argsAndCallback","concat","Array","prototype","slice","call","arguments","length","TypeError","applyEachSeries","apply","EventEmitter","Errors","statusCode","title","message","module","AbstractMethodError","msg","captureStackTrace","constructor","AbstractClassError","CodedError","code","FileNotFoundError","HttpError","status","innerMessage","finalStatus","Number","isNumber","err","errors","find","x","hasOwnProperty","Object","assign","HttpBadRequestError","HttpNotFoundError","HttpMethodNotAllowedError","HttpUnauthorizedError","HttpNotAcceptableError","HttpRequestTimeoutError","HttpConflictError","HttpTokenExpiredError","HttpTokenRequiredError","HttpForbiddenError","HttpServerError","HttpServiceUnavailable","DataError","model","field","additionalData","NotNullError","DataNotFoundError","AccessDeniedError","UniqueConstraintError","IS_NODE","toString","process","UUID_CHARS","HEX_CHARS","STRIP_COMMENTS","DATE_TIME_REGEX","BOOLEAN_TRUE_REGEX","BOOLEAN_FALSE_REGEX","NULL_REGEX","UNDEFINED_REGEX","INT_REGEX","FLOAT_REGEX","GUID_REGEX","LOG_LEVELS","error","warn","info","verbose","debug","UnknownPropertyDescriptor","obj","name","defineProperty","configurable","enumerable","get","set","value","LangUtils","ctor","superCtor","utilModule","util","require","inherits","create","writable","setPrototypeOf","__proto__","super_","fn","fnStr","replace","result","indexOf","match","parseInt","parseFloat","Date","parse","origin","expr","options","convertValues","exec","descriptor","expr1","test","isArray","substr","index","extend","re","typedValue","convert","push","form","keys","forEach","key","any","Args","notNull","res","ArgumentError","arg","isNaN","bind","notNumber","TextUtils","md5","md5module","window","toUTCString","JSON","stringify","crypto","createHash","update","digest","cryptoModule","sha1","sha256","chars","uuid","r","i","Math","random","join","TraceUtils","logger","_logger","level","_data","log","TraceLogger","RandomUtils","str","randomInt","min","max","floor","NumberUtils","s","num","a","charCodeAt","out","String","fromCharCode","PathUtils","_part","pathModule","path","parts","l","split","newParts","part1","pop","unshift","timestamp","writeError","filter","write","stack","map","colors","env","NODE_ENV","check","data","args","sprintf","text","console","toUpperCase","Base26Number","thisValue","toBase26","Guid","_value","newUUID","ConfigurationBase","configPath","cwd","_configurationPath","_executionPath","useStrategy","ModuleLoaderStrategy","DefaultModuleLoaderStrategy","configSourcePath","_config","p","_","at","isObject","configStrategyCtor","strategyCtor","notFunction","_strategies","_currentConfiguration","configuration","hasStrategy","ConfigurationStrategy","config","modulePath","notEmpty","resolve","paths","path1","getConfiguration","getExecutionPath","finalModulePath","HTML_END_CHAR","HTML_FULL_END_STRING","HTML_SPACE_CHAR","HTML_ATTR_STRING","HTML_START_TAG_STRING","HTML_END_TAG_STRING","HtmlWriter","bufferedAttributes","bufferedTags","buffer","indent","prop","tag","repeat","attr","escape","splice","tagsLength","IApplication","_configPath","serviceCtor","IApplicationService","app","ApplicationService","_app"],"mappings":"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"}