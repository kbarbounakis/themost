{"version":3,"file":"themost_common.js","sources":["../src/emitter.js","../src/http-error-codes.js","../src/errors.js","../src/utils.js","../src/config.js","../src/html.js","../src/app.js"],"sourcesContent":["/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\n \nimport {EventEmitter} from 'events';\nimport {applyEachSeries} from 'async';\n\n/**\n * @classdesc SequentialEventEmitter class is an extension of node.js EventEmitter class where listeners are executing in series.\n * @class\n * @constructor\n * @augments EventEmitter\n */\nexport class SequentialEventEmitter extends EventEmitter {\n    /**\n     * Executes event listeners in series.\n     * @param {String} event - The event that is going to be executed.\n     * @param {...*} args - An object that contains the event arguments.\n     */\n    // eslint-disable-next-line no-unused-vars\n    // tslint:disable-nex-lineb no-unused-variable\n    emit(event, _args) {\n        //get listeners\n        if (typeof this.listeners !== 'function') {\n            throw new Error('undefined listeners');\n        }\n        const listeners = this.listeners(event);\n\n        const argsAndCallback = [].concat(Array.prototype.slice.call(arguments, 1));\n        if (argsAndCallback.length > 0) {\n            //check the last argument (expected callback function)\n            if (typeof argsAndCallback[argsAndCallback.length - 1] !== \"function\") {\n                throw new TypeError(\"Expected event callback\");\n            }\n        }\n        //get callback function (the last argument of arguments list)\n        const callback = argsAndCallback[argsAndCallback.length - 1];\n\n        //validate listeners\n        if (listeners.length===0) {\n            //exit emitter\n            return callback();\n        }\n        //apply each series\n        return applyEachSeries.apply(this, [listeners].concat(argsAndCallback));\n    }\n}\n","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\n \nconst Errors = [{\n    statusCode: 400,\n    title: \"Bad Request\",\n    message: \"The request cannot be fulfilled due to bad syntax.\"\n}, {\n    statusCode: 401,\n    title: \"Unauthorized\",\n    message: \"The request was a legal request, but requires user authentication.\"\n}, {\n    statusCode: 403,\n    title: \"Forbidden\",\n    message: \"The server understood the request, but is refusing to fulfill it.\"\n}, {\n    statusCode: 404,\n    title: \"Not Found\",\n    message: \"The requested resource could not be found but may be available again in the future.\"\n}, {\n    statusCode: 405,\n    title: \"Method Not Allowed\",\n    message: \"A request was made of a resource using a request method not supported by that resource.\"\n}, {\n    statusCode: 406,\n    title: \"Not Acceptable\",\n    message: \"The requested resource is only capable of generating content not acceptable according to the Accept headers sent in the request.\"\n}, {\n    statusCode: 407,\n    title: \"Proxy Authentication Required\",\n    message: \"The client must first authenticate itself with the proxy.\"\n}, {\n    statusCode: 408,\n    title: \"Request Timeout\",\n    message: \"The server timed out waiting for the request.\"\n}, {\n    statusCode: 409,\n    title: \"Conflict\",\n    message: \"The request could not be completed due to a conflict with the current state of the resource.\"\n}, {\n    statusCode: 410,\n    title: \"Gone\",\n    message: \"The resource requested is no longer available and will not be available again.\"\n}, {\n    statusCode: 411,\n    title: \"Length Required\",\n    message: \"The request did not specify the length of its content, which is required by the requested resource.\"\n}, {\n    statusCode: 412,\n    title: \"Precondition Failed\",\n    message: \"The server does not meet one of the preconditions that the requester put on the request.\"\n}, {\n    statusCode: 413,\n    title: \"Request Entity Too Large\",\n    message: \"The request is larger than the server is willing or able to process.\"\n}, {\n    statusCode: 414,\n    title: \"Request-URI Too Long\",\n    message: \"The URI provided was too long for the server to process.\"\n}, {\n    statusCode: 415,\n    title: \"Unsupported Media Type\",\n    message: \"The server is refusing to service the request because the payload is in a format not supported by this method on the target resource.\"\n}, {\n    statusCode: 416,\n    title: \"Requested Range Not Satisfiable\",\n    message: \"The client has asked for a portion of the file, but the server cannot supply that portion.\"\n}, {\n    statusCode: 417,\n    title: \"Expectation Failed\",\n    message: \"The server cannot meet the requirements of the Expect request-header field.\"\n}, {\n    statusCode: 496,\n    title: \"No Cert\",\n    message: \"The client must provide a certificate to fulfill the request.\"\n}, {\n    statusCode: 498,\n    title: \"Token expired\",\n    message: \"Token was expired or is in invalid state.\"\n}, {\n    statusCode: 499,\n    title: \"Token required\",\n    message: \"A token is required to fulfill the request.\"\n}, {\n    statusCode: 500,\n    title: \"Internal Server Error\",\n    message: \"The server encountered an internal error and was unable to complete your request.\"\n}, {\n    statusCode: 501,\n    title: \"Not Implemented\",\n    message: \"The server either does not recognize the request method, or it lacks the ability to fulfil the request.\"\n}, {\n    statusCode: 502,\n    title: \"Bad Gateway\",\n    message: \"The server was acting as a gateway or proxy and received an invalid response from the upstream server.\"\n}, {\n    statusCode: 503,\n    title: \"Service Unavailable\",\n    message: \"The server is currently unavailable (because it is overloaded or down for maintenance).\"\n}];\n\nmodule.exports.Errors = Errors;","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\nimport {Errors as errors} from './http-error-codes';\n\n\n/**\n * @classdesc Thrown when an application tries to call an abstract method.\n * @class\n */\nexport class AbstractMethodError extends Error {\n    /**\n     * @param {string=} msg\n     */\n    constructor(msg) {\n        super(msg || 'Class does not implement inherited abstract method.');\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\n\n/**\n * @classdesc Thrown when an application tries to instantiate an abstract class.\n * @class\n */\nexport class AbstractClassError extends Error {\n    /**\n     * @param {string=} msg\n     */\n    constructor(msg) {\n        super(msg || 'An abstract class cannot be instantiated.');\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\n\n/**\n * @classdesc Represents an error with a code.\n * @class\n */\nexport class CodedError extends Error {\n    /**\n     * @param {string} msg\n     * @param {string} code\n     */\n    constructor(msg, code) {\n        super(msg);\n        this.code = code;\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\n\n/**\n * @classdesc Thrown when an application tries to access a file which does not exist.\n * @class\n */\nexport class FileNotFoundError extends CodedError {\n    /**\n    * @param {string=} msg\n    */\n    constructor(msg) {\n        super(msg | 'File not found', \"EFOUND\");\n    }\n}\n\n\n/**\n * @classdesc Represents an HTTP error.\n * @class\n * @param {number} status\n * @param {string=} message\n * @param {string=} innerMessage,\n * @constructor\n * @extends CodedError\n */\nexport class HttpError extends CodedError {\n    constructor(status, message, innerMessage) {\n        super(message, \"EHTTP\");\n        const finalStatus = (typeof status === 'number') ? parseInt(status, 10) : 500;\n        const err = errors.find( x => {\n            return x.statusCode === finalStatus;\n        });\n        if (err) {\n            this.title = err.title;\n            this.message = message || err.message;\n            this.statusCode = err.statusCode;\n        }\n        else {\n            this.title = 'Internal Server Error';\n            this.message = message || 'The server encountered an internal error and was unable to complete the request.';\n            this.statusCode = finalStatus\n        }\n        if (typeof innerMessage !== 'undefined') {\n            this.innerMessage = innerMessage;\n        }\n    }\n\n    /**\n     * @deprecated This static has been deprecated and it's going to be removed. Use default constructor instead.\n     * @param {Error=} err\n     * @returns {HttpError}\n     */\n    static create(err) {\n        if (err == null) {\n            return new HttpError(500);\n        }\n        if (err.hasOwnProperty('statusCode')) {\n            return Object.assign(new HttpError(err.statusCode, err.message), err);\n        }\n        else {\n            return Object.assign(new HttpError(500, err.message), err);\n        }\n    }\n}\n\n/**\n * @classdesc Represents a 400 HTTP Bad Request error.\n * @class\n */\nexport class HttpBadRequestError extends HttpError {\n    constructor(message, innerMessage) {\n        super(400, message, innerMessage);\n    }\n}\n\n/**\n * @classdesc Represents a 404 HTTP Not Found error.\n * @class\n * @property {string} resource - Gets or sets the requested resource which could not to be found\n */\n export class HttpNotFoundError extends HttpError {\n    constructor(message, innerMessage) {\n        super(404, message, innerMessage);\n    }\n }\n/**\n * @classdesc Represents a 405 HTTP Method Not Allowed error.\n * @class\n */\nexport class HttpMethodNotAllowedError extends HttpError {\n    constructor(message, innerMessage) {\n        super(405, message, innerMessage);\n    }\n}\n\n/**\n * @classdesc Represents a 401 HTTP Unauthorized error.\n * @class\n */\nexport class HttpUnauthorizedError extends HttpError {\n    constructor(message, innerMessage) {\n        super(401, message, innerMessage);\n    }\n}\n/**\n * @classdesc HTTP 406 Not Acceptable exception class\n * @class\n */\nexport class HttpNotAcceptableError extends HttpError {\n    constructor(message, innerMessage) {\n        super(406, message, innerMessage);\n    }\n}\n\n/**\n * @classdesc HTTP 408 RequestTimeout exception class\n * @class\n */\nexport class HttpRequestTimeoutError extends HttpError {\n    constructor(message, innerMessage) {\n        super(408, message, innerMessage);\n    }\n}\n\n/**\n * @classdesc HTTP 409 Conflict exception class\n * @class\n */\nexport class HttpConflictError extends HttpError {\n    constructor(message, innerMessage) {\n        super(409, message, innerMessage);\n    }\n}\n\n/**\n * @classdesc HTTP 498 Token Expired exception class\n * @class\n */\nexport class HttpTokenExpiredError extends HttpError {\n    constructor(message, innerMessage) {\n        super(498, message, innerMessage);\n    }\n}\n/**\n * @classdesc HTTP 499 Token Required exception class\n * @class\n */\nexport class HttpTokenRequiredError extends HttpError {\n    constructor(message, innerMessage) {\n        super(499, message, innerMessage);\n    }\n}\n/**\n * @classdesc Represents a 403 HTTP Forbidden error.\n * @class\n */\nexport class HttpForbiddenError extends HttpError {\n    constructor(message, innerMessage) {\n        super(403, message, innerMessage);\n    }\n}\n/**\n * @classdesc Represents a 500 HTTP Internal Server error.\n * @class\n */\nexport class HttpServerError extends HttpError {\n    constructor(message, innerMessage) {\n        super(500, message, innerMessage);\n    }\n}\n/**\n * @classdesc Represents a 503 HTTP Service Unavailable.\n * @class\n */\nexport class HttpServiceUnavailable extends HttpError {\n    constructor(message, innerMessage) {\n        super(503, message, innerMessage);\n    }\n}\n/**\n * @classdesc Extends Error object for throwing exceptions on data operations\n * @class\n * @property {string} code - A string that represents an error code e.g. EDATA\n * @property {string} message -  The error message.\n * @property {string} innerMessage - The error inner message.\n * @property {number} status - A number that represents an error status. This error status may be used for throwing the appropriate HTTP error.\n * @property {*} additionalData - Additional data associated with this error\n */\nexport class DataError extends CodedError {\n    /**\n     * @param {string=} code - A string that represents an error code\n     * @param {string=} message - The error message\n     * @param {string=} innerMessage - The error inner message\n     * @param {string=} model - The target model\n     * @param {string=} field - The target field\n     * @param {*} additionalData - Additional data associated with this error\n     */\n    constructor(code, message, innerMessage, model, field, additionalData) {\n        super(message, code);\n        this.code = code || 'EDATA';\n        if (typeof model !== 'undefined') {\n            this.model = model;\n        }\n        if (typeof field !== 'undefined') {\n            this.field = field;\n        }\n        this.message = message || 'A general data error occured.';\n        if (typeof innerMessage !== 'undefined') {\n            this.innerMessage = innerMessage;\n        }\n        this.additionalData = additionalData;\n    }\n}\n\n/**\n * Thrown when an application attempts to access a data object that cannot be found.\n */\nexport class NotNullError extends DataError {\n    /**\n    * @param {string=} message - The error message\n    * @param {string=} innerMessage - The error inner message\n    * @param {string=} model - The target model\n    * @param {string=} field - The target field\n    */\n    constructor(message, innerMessage, model, field) {\n        super('ENULL', message || 'A value is required.', innerMessage, model, field);\n        this.statusCode = 409;\n    }\n}\n\n/**\n * @classdesc Thrown when an application attempts to access a data object that cannot be found.\n * @class\n */\nexport class DataNotFoundError extends DataError {\n    /**\n    * @param {string=} message - The error message\n    * @param {string=} innerMessage - The error inner message\n    * @param {string=} model - The target model\n    */\n    constructor(message, innerMessage, model) {\n        super('EFOUND', message || 'The requested data was not found.', innerMessage, model);\n        this.statusCode = 404;\n    }\n}\n\n/**\n * @class\n * @classdesc Thrown when a data object operation is denied\n */\nexport class AccessDeniedError extends DataError {\n    /**\n    * @param {string=} message - The error message\n    * @param {string=} innerMessage - The error inner message\n    * @param {string=} model - The target model\n    */\n    constructor(message, innerMessage, model) {\n        super('EACCESS', ('Access Denied' || message), innerMessage, model);\n        this.statusCode = 401;\n    }\n}\n\n/**\n * @class\n * @classdesc Thrown when a unique constraint is being violated\n */\nexport class UniqueConstraintError extends DataError {\n    /**\n    * @param {string=} message - The error message\n    * @param {string=} innerMessage - The error inner message\n    * @param {string=} model - The target model\n    */\n    constructor(message, innerMessage, model) {\n        super('EUNQ', message || 'A unique constraint violated', innerMessage, model);\n        this.statusCode = 409;\n    }\n}\n","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\nimport {sprintf} from \"sprintf\";\n\nconst IS_NODE = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\nconst UUID_CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\nconst HEX_CHARS = 'abcdef1234567890';\nconst STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nconst DATE_TIME_REGEX = /^\\d{4}-([0]\\d|1[0-2])-([0-2]\\d|3[01])(?:[T ](\\d+):(\\d+)(?::(\\d+)(?:\\.(\\d+))?)?)?(?:Z(-?\\d*))?$/g;\nconst BOOLEAN_TRUE_REGEX = /^true$/ig;\nconst BOOLEAN_FALSE_REGEX = /^false$/ig;\nconst NULL_REGEX = /^null$/ig;\nconst UNDEFINED_REGEX = /^undefined$/ig;\nconst INT_REGEX =/^[-+]?\\d+$/g;\nconst FLOAT_REGEX =/^[+-]?\\d+(\\.\\d+)?$/g;\nconst GUID_REGEX = /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;\n\nconst LOG_LEVELS = {\n    error: 0,\n    warn: 1,\n    info: 2,\n    verbose: 3,\n    debug: 4\n};\n\nexport class UnknownPropertyDescriptor {\n    constructor(obj, name) {\n        Object.defineProperty(this, 'value', { \n            configurable:false, \n            enumerable:true, \n            get: function() { \n                    return obj[name]; \n                }, \n            set: function(value) { \n                    obj[name]=value; \n                }\n        });\n        Object.defineProperty(this, 'name', { \n            configurable:false, \n            enumerable:true, \n            get: function() { \n                return name; \n                } \n        });\n    }\n}\n\n/**\n * @class\n * @constructor\n */\nexport class LangUtils {\n    /**\n     * Inherit the prototype methods from one constructor into another.\n     * @param {Function} ctor\n     * @param {Function|*} superCtor\n     * @deprecated This method has been deprecated and it will be removed in next version\n     * @example\n    function Animal() {\n        //\n    }\n\n    function Dog() {\n        Dog.super_.bind(this)();\n    }\n    LangUtils.inherits(Dog,Animal);\n     */\n    static inherits(ctor, superCtor) {\n\n        if (typeof superCtor !== \"function\" && superCtor !== null) {\n            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superCtor);\n        }\n\n        //if process is running under node js\n        if (IS_NODE) {\n            const utilModule = \"util\";\n            const util = require(utilModule);\n            //call util.inherits() function\n            return util.inherits(ctor, superCtor);\n        }\n\n        ctor.prototype = Object.create(superCtor && superCtor.prototype, {\n            constructor: {\n                value: ctor,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superCtor) {\n            /**\n             * @function setPrototypeOf\n             * @param {*} obj\n             * @param {*} prototype\n             * @memberOf Object\n             * @static\n             */\n            if (typeof Object.setPrototypeOf === 'function') {\n                Object.setPrototypeOf(ctor, superCtor)\n            }\n            else {\n                ctor.__proto__ = superCtor\n            }\n        }\n        //node.js As an additional convenience, superConstructor will be accessible through the constructor.super_ property.\n        ctor.super_ = ctor.__proto__;\n    }\n\n    /**\n     * Returns an array of strings which represents the arguments' names of the given function\n     * @param {Function} fn\n     * @returns {Array}\n     */\n    static getFunctionParams(fn) {\n        if (typeof fn === 'function')\n            return [];\n        const fnStr = fn.toString().replace(STRIP_COMMENTS, '');\n        let result = fnStr.slice(fnStr.indexOf('(')+1, fnStr.indexOf(')')).match(/([^\\s,]+)/g);\n        if(result === null)\n            result = [];\n        return result;\n    }\n\n    /**\n     * @param {string} value\n     */\n    static convert(value) {\n        let result;\n        if ((typeof value === 'string'))\n        {\n            if (value.length===0) {\n                result = value\n            }\n            if (value.match(BOOLEAN_TRUE_REGEX)) {\n                result = true;\n            }\n            else if (value.match(BOOLEAN_FALSE_REGEX)) {\n                result = false;\n            }\n            else if (value.match(NULL_REGEX) || value.match(UNDEFINED_REGEX)) {\n                result = null;\n            }\n            else if (value.match(INT_REGEX)) {\n                result = parseInt(value);\n            }\n            else if (value.match(FLOAT_REGEX)) {\n                result = parseFloat(value);\n            }\n            else if (value.match(DATE_TIME_REGEX)) {\n                result = new Date(Date.parse(value));\n            }\n            else {\n                result = value;\n            }\n        }\n        else {\n            result = value;\n        }\n        return result;\n    }\n\n    /**\n     *\n     * @param {*} origin\n     * @param {string} expr\n     * @param {string} value\n     * @param {*=} options\n     * @returns {*}\n     */\n    static extend(origin, expr, value, options) {\n\n        options = options || { convertValues:false };\n        //find base notation\n        let match = /(^\\w+)\\[/.exec(expr), name, descriptor, expr1;\n        if (match) {\n            //get property name\n            name = match[1];\n            //validate array property\n            if (/^\\d+$/g.test(name)) {\n                //property is an array\n                if (!Array.isArray(origin.value))\n                    origin.value = [];\n                // get new expression\n                expr1 = expr.substr(match.index + match[1].length);\n                LangUtils.extend(origin, expr1, value, options);\n            }\n            else {\n                //set property value (unknown)\n                origin[name] = origin[name] || new LangUtils();\n                descriptor = new UnknownPropertyDescriptor(origin, name);\n                // get new expression\n                expr1 = expr.substr(match.index + match[1].length);\n                LangUtils.extend(descriptor, expr1, value, options);\n            }\n        }\n        else if (expr.indexOf('[')===0) {\n            //get property\n            const re = /\\[(.*?)\\]/g;\n            match = re.exec(expr);\n            if (match) {\n                name = match[1];\n                // get new expression\n                expr1 = expr.substr(match.index + match[0].length);\n                if (/^\\d+$/g.test(name)) {\n                    //property is an array\n                    if (!Array.isArray(origin.value))\n                        origin.value = [];\n                }\n                if (expr1.length===0) {\n                    if (origin.value instanceof LangUtils) {\n                        origin.value = {};\n                    }\n                    let typedValue;\n                    //convert string value\n                    if ((typeof value === 'string') && options.convertValues) {\n                        typedValue = LangUtils.convert(value);\n                    }\n                    else {\n                        typedValue = value;\n                    }\n                    if (Array.isArray(origin.value))\n                        origin.value.push(typedValue);\n                    else\n                        origin.value[name] = typedValue;\n                }\n                else {\n                    if (origin.value instanceof LangUtils) {\n                        origin.value = { };\n                    }\n                    origin.value[name] = origin.value[name] || new LangUtils();\n                    descriptor = new UnknownPropertyDescriptor(origin.value, name);\n                    LangUtils.extend(descriptor, expr1, value, options);\n                }\n            }\n            else {\n                throw new Error('Invalid object property notation. Expected [name]');\n            }\n        }\n        else if (/^\\w+$/.test(expr)) {\n            if (options.convertValues)\n                origin[expr] = LangUtils.convert(value);\n            else\n                origin[expr] = value;\n        }\n        else {\n            throw new Error('Invalid object property notation. Expected property[name] or [name]');\n        }\n        return origin;\n    }\n\n    /**\n     *\n     * @param {*} form\n     * @param {*=} options\n     * @returns {*}\n     */\n    static parseForm(form, options) {\n        const result = {};\n        if (typeof form === 'undefined' || form===null)\n            return result;\n        const keys = Object.keys(form);\n        keys.forEach(key => {\n            if (form.hasOwnProperty(key))\n            {\n                LangUtils.extend(result, key, form[key], options)\n            }\n        });\n        return result;\n    }\n\n    /**\n     * Parses any value or string and returns the resulted object.\n     * @param {*} any\n     * @returns {*}\n     */\n    static parseValue(any) {\n        return LangUtils.convert(any);\n    }\n\n    /**\n     * Parses any value and returns the equivalent integer.\n     * @param {*} any\n     * @returns {*}\n     */\n    static parseInt(any) {\n        return parseInt(any) || 0;\n    }\n\n    /**\n     * Parses any value and returns the equivalent float number.\n     * @param {*} any\n     * @returns {*}\n     */\n    static parseFloat(any) {\n        return parseFloat(any) || 0;\n    }\n\n    /**\n     * Parses any value and returns the equivalent boolean.\n     * @param {*} any\n     * @returns {*}\n     */\n    static parseBoolean(any) {\n        if (typeof any === 'undefined' || any === null)\n            return false;\n        else if (typeof any === 'number')\n            return any !== 0;\n        else if (typeof any === 'string') {\n            if (any.match(INT_REGEX) || any.match(FLOAT_REGEX)) {\n                return parseInt(any, 10) !== 0;\n            }\n            else if (any.match(BOOLEAN_TRUE_REGEX))\n                return true;\n            else if (any.match(BOOLEAN_FALSE_REGEX))\n                return false;\n            else if (/^yes$|^on$|^y$|^valid$/i.test(any))\n                return true;\n            else if (/^no$|^off$|^n$|^invalid$/i.test(any))\n                return false;\n            else\n                return false;\n        }\n        else if (typeof any === 'boolean')\n            return any;\n        else {\n            return (parseInt(any) || 0) !== 0;\n        }\n    }\n\n    /**\n     * @static\n     * Checks if the given value is a valid date\n     * @param {*} value\n     * @returns {boolean}\n     */\n    static isDate(value) {\n        if (value instanceof Date) {\n            return true;\n        }\n        return DATE_TIME_REGEX.test(value);\n    }\n}\n\n/**\n * @function captureStackTrace\n * @memberOf Error\n * @param {Error} thisArg\n * @param {string} name\n * @static\n */\n\n/**\n * @class\n * @constructor\n */\nexport class Args {\n    /**\n     * Checks the expression and throws an exception if the condition is not met.\n     * @param {*} expr\n     * @param {string|Error} err\n     */\n    static check(expr, err) {\n        Args.notNull(expr,\"Expression\");\n        let res;\n        if (typeof expr === 'function') {\n            res = !(expr.call());\n        }\n        else {\n            res = (!expr);\n        }\n        if (res) {\n            if (err instanceof Error) {\n                throw err;\n            }\n            throw new ArgumentError(err, \"ECHECK\");\n        }\n    }\n\n    /**\n     *\n     * @param {*} arg\n     * @param {string} name\n     */\n    static notNull(arg, name) {\n        if (typeof arg === 'undefined' || arg === null) {\n            throw new ArgumentError(name + \" may not be null or undefined\", \"ENULL\");\n        }\n    }\n\n    /**\n     * @param {*} arg\n     * @param {string} name\n     */\n    static notString(arg, name) {\n        if (typeof arg !== 'string') {\n            throw new ArgumentError(name + \" must be a string\", \"EARG\");\n        }\n    }\n\n    /**\n     * @param {*} arg\n     * @param {string} name\n     */\n    static notFunction(arg, name) {\n        if (typeof arg !== 'function') {\n            throw new ArgumentError(name + \" must be a function\", \"EARG\");\n        }\n    }\n\n    /**\n     * @param {*} arg\n     * @param {string} name\n     */\n    static notNumber(arg, name) {\n        if ((typeof arg !== 'number') || isNaN(arg)) {\n            throw new ArgumentError(name + \" must be number\", \"EARG\");\n        }\n    }\n\n    /**\n     * @param {string|*} arg\n     * @param {string} name\n     */\n    static notEmpty(arg, name) {\n        Args.notNull(arg,name);\n        if ((Object.prototype.toString.bind(arg)() === '[object Array]') && (arg.length === 0)) {\n            throw new ArgumentError(name + \" may not be empty\",\"EEMPTY\");\n        }\n        else if ((typeof arg === 'string') && (arg.length===0)) {\n            throw new ArgumentError(name + \" may not be empty\",\"EEMPTY\");\n        }\n    }\n\n    /**\n     * @param {number|*} arg\n     * @param {string} name\n     */\n    static notNegative(arg, name) {\n        Args.notNumber(arg,name);\n        if (arg<0) {\n            throw new ArgumentError(name + \" may not be negative\", \"ENEG\");\n        }\n    }\n\n    /**\n     * @param {number|*} arg\n     * @param {string} name\n     */\n    static notPositive(arg, name) {\n        Args.notNumber(arg,name);\n        if (arg<=0) {\n            throw new ArgumentError(name + \" may not be negative or zero\", \"EPOS\");\n        }\n    }\n}\n\n/**\n * @class\n * @constructor\n */\nexport class TextUtils {\n    /**\n     * Converts the given parameter to MD5 hex string\n     * @static\n     * @param {*} value\n     * @returns {string|undefined}\n     */\n    static toMD5(value) {\n\n        if (typeof value === 'undefined' || value === null) {\n            return;\n        }\n        //browser implementation\n        let md5, md5module;\n        if (typeof window !== 'undefined') {\n            md5module = 'blueimp-md5';\n            md5 = require(md5module);\n            if (typeof value === 'string') {\n                return md5(value);\n            }\n            else if (value instanceof Date) {\n                return md5(value.toUTCString());\n            }\n            else {\n                return md5(JSON.stringify(value));\n            }\n        }\n        //node.js implementation\n        md5module = 'crypto';\n        const crypto = require(md5module);\n        md5 = crypto.createHash('md5');\n        if (typeof value === 'string') {\n            md5.update(value);\n        }\n        else if (value instanceof Date) {\n            md5.update(value.toUTCString());\n        }\n        else {\n            md5.update(JSON.stringify(value));\n        }\n        return md5.digest('hex');\n    }\n\n    /**\n     * Converts the given parameter to SHA1 hex string\n     * @static\n     * @param {*} value\n     * @returns {string|undefined}\n     */\n    static toSHA1(value) {\n\n        const cryptoModule = 'crypto';\n        if (typeof window !== 'undefined') {\n            throw new Error('This method is not implemented for this environment')\n        }\n\n        const crypto = require(cryptoModule);\n        if (typeof value === 'undefined' || value === null) {\n            return;\n        }\n        const sha1 = crypto.createHash('sha1');\n        if (typeof value === 'string') {\n            sha1.update(value);\n        }\n        else if (value instanceof Date) {\n            sha1.update(value.toUTCString());\n        }\n        else {\n            sha1.update(JSON.stringify(value));\n        }\n        return sha1.digest('hex');\n    }\n\n    /**\n     * Converts the given parameter to SHA256 hex string\n     * @static\n     * @param {*} value\n     * @returns {string|undefined}\n     */\n    static toSHA256(value) {\n\n        const cryptoModule = 'crypto';\n        if (typeof window !== 'undefined') {\n            throw new Error('This method is not implemented for this environment')\n        }\n\n        const crypto = require(cryptoModule);\n        if (typeof value === 'undefined' || value === null) {\n            return;\n        }\n        const sha256 = crypto.createHash('sha256');\n        if (typeof value === 'string') {\n            sha256.update(value);\n        }\n        else if (value instanceof Date) {\n            sha256.update(value.toUTCString());\n        }\n        else {\n            sha256.update(JSON.stringify(value));\n        }\n        return sha256.digest('hex');\n    }\n\n    /**\n     * Returns a random GUID/UUID string\n     * @static\n     * @returns {string}\n     */\n    static newUUID() {\n        const chars = UUID_CHARS;\n        const uuid = [];\n        // rfc4122, version 4 form\n        let r = void 0;\n        // rfc4122 requires these characters\n        uuid[8] = uuid[13] = uuid[18] = uuid[23] = \"-\";\n        uuid[14] = \"4\";\n\n        // Fill in random data.  At i==19 set the high bits of clock sequence as\n        // per rfc4122, sec. 4.1.5\n        for (let i = 0; i < 36; i++) {\n            if (!uuid[i]) {\n                r = 0 | Math.random() * 16;\n                uuid[i] = chars[i === 19 ? r & 0x3 | 0x8 : r];\n            }\n        }\n        return uuid.join(\"\");\n    }\n}\n\n/**\n * @class\n * @param {*} options\n * @constructor\n */\nexport class TraceLogger {\n    constructor(options) {\n        this.options = {\n            colors:false,\n            level:\"info\"\n        };\n        if (typeof options === \"undefined\" && options !== null && IS_NODE) {\n            if (IS_NODE && process.env.NODE_ENV === \"development\") {\n                this.options.level = \"debug\";\n            }\n        }\n        if (typeof options !== \"undefined\" && options !== null ) {\n            this.options = options;\n            //validate logging level\n            Args.check(LOG_LEVELS.hasOwnProperty(this.options.level), \"Invalid logging level. Expected error, warn, info, verbose or debug.\");\n        }\n    }\n\n    /**\n     * @param {string} level\n     * @returns {*}\n     */\n    level(level) {\n        Args.check(LOG_LEVELS.hasOwnProperty(level), \"Invalid logging level. Expected error, warn, info, verbose or debug.\");\n        this.options.level = level;\n        return this;\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    log(data) {\n        const args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"info\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"info\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"info\", sprintf.apply(null, args));\n        }\n        this.write(\"info\", data);\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    info(data) {\n        const args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"info\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"info\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"info\", sprintf.apply(null, args));\n        }\n        this.write(\"info\", data);\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    error(data) {\n        const args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"error\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"error\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"error\", sprintf.apply(null, args));\n        }\n        this.write(\"error\", data);\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    warn(data) {\n        const args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"warn\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"warn\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"warn\", sprintf.apply(null, args));\n        }\n        this.write(\"warn\", data);\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    verbose(data) {\n        const args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"verbose\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"verbose\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"verbose\", sprintf.apply(null, args));\n        }\n        this.write(\"verbose\", data);\n    }\n\n    /**\n     * @param {...*} data\n     */\n    // eslint-disable-next-line no-unused-vars\n    debug(data) {\n        const args = Array.prototype.slice.call(arguments);\n        if (typeof data === 'undefined' || data === null) {\n            return;\n        }\n        if (data instanceof Error) {\n            return writeError.bind(this)(\"debug\",data);\n        }\n        if (typeof data !== 'string') {\n            return this.write(\"debug\", data.toString());\n        }\n        if (args.length>1) {\n            return this.write(\"debug\", sprintf.apply(null, args));\n        }\n        this.write(\"debug\", data);\n\n    }\n\n    write(level, text) {\n        if (LOG_LEVELS[level]>LOG_LEVELS[this.options.level]) {\n            return;\n        }\n        // eslint-disable-next-line no-console\n        console.log(timestamp() + \" [\" + level.toUpperCase() + \"] \" + text);\n    }\n}\n\n/**\n * @class\n * @constructor\n */\nexport class TraceUtils {\n    static useLogger(logger) {\n        TraceUtils._logger = logger;\n    }\n\n    static level(level) {\n        TraceUtils._logger.level(level);\n    }\n\n    /**\n     * @static\n     * @param {...*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static log(_data) {\n        TraceUtils._logger.log.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n\n    /**\n     * @static\n     * @param {...*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static error(_data) {\n        TraceUtils._logger.error.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n\n    /**\n     *\n     * @static\n     * @param {...*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static info(_data) {\n        TraceUtils._logger.info.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n\n    /**\n     *\n     * @static\n     * @param {*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static warn(_data) {\n        TraceUtils._logger.warn.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n\n    /**\n     *\n     * @static\n     * @param {*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static verbose(_data) {\n        TraceUtils._logger.verbose.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n\n    /**\n     *\n     * @static\n     * @param {...*} _data\n     */\n    // eslint-disable-next-line no-unused-vars\n    static debug(_data) {\n        TraceUtils._logger.debug.apply(TraceUtils._logger, Array.prototype.slice.call(arguments));\n    }\n}\nObject.defineProperty(TraceUtils, '_logger', {\n    enumerable: false,\n    configurable: false,\n    value: new TraceLogger()\n});\n\n\n/**\n * @class\n * @constructor\n */\nexport class RandomUtils {\n    /**\n     * Returns a random string based on the length specified\n     * @param {Number} length\n     */\n    static randomChars(length) {\n        length = length || 8;\n        const chars = \"abcdefghkmnopqursuvwxz2456789ABCDEFHJKLMNPQURSTUVWXYZ\";\n        let str = \"\";\n        for(let i = 0; i < length; i++) {\n            str += chars.substr(this.randomInt(0, chars.length-1),1);\n        }\n        return str;\n    }\n\n    /**\n     * Returns a random integer between a minimum and a maximum value\n     * @param {number} min\n     * @param {number} max\n     */\n    static randomInt(min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n\n    /**\n     * Returns a random string based on the length specified\n     * @static\n     * @param {number} length\n     * @returns {string}\n     */\n    static randomHex(length) {\n        length = (length || 8)*2;\n        let str = \"\";\n        for(let i = 0; i < length; i++) {\n            str += HEX_CHARS.substr(this.randomInt(0, HEX_CHARS.length-1),1);\n        }\n        return str;\n    }\n}\n\n/**\n * @class\n * @constructor\n */\nexport class NumberUtils {\n    /**\n     * Converts a base-26 formatted string to the equivalent integer\n     * @static\n     * @param {string} s A base-26 formatted string e.g. aaaaaaaa for 0, baaaaaaa for 1 etc\n     * @return {number} The equivalent integer value\n     */\n    static fromBase26(s) {\n        let num = 0;\n        if (!/[a-z]{8}/.test(s)) {\n            throw new Error('Invalid base-26 format.');\n        }\n        const a = 'a'.charCodeAt(0);\n        for (let i = 7; i >=0; i--) {\n            num = (num * 26) + (s[i].charCodeAt(0) - a);\n        }\n        return num;\n    }\n\n    /**\n     * Converts an integer to the equivalent base-26 formatted string\n     * @static\n     * @param {number} x The integer to be converted\n     * @return {string} The equivalent string value\n     */\n    static toBase26(x) {\n        //noinspection ES6ConvertVarToLetConst\n        var num = parseInt(x);\n        if (num<0) {\n            throw new Error('A non-positive integer cannot be converted to base-26 format.');\n        }\n        if (num>208827064575) {\n            throw new Error('A positive integer bigger than 208827064575 cannot be converted to base-26 format.');\n        }\n        let out = \"\";\n        let length = 1;\n        const a = 'a'.charCodeAt(0);\n        while(length<=8)\n        {\n            out += String.fromCharCode(a + (num % 26));\n            num = Math.floor(num / 26);\n            length += 1;\n        }\n        return out;\n    }\n}\n\n/**\n * @class\n * @constructor\n */\nexport class PathUtils {\n    /**\n     *\n     * @param {...string} _part\n     * @returns {string}\n     */\n    // eslint-disable-next-line no-unused-vars\n    static join(_part) {\n        const pathModule = \"path\";\n        if (IS_NODE) {\n            const path = require(pathModule);\n            return path.join.apply(null, Array.prototype.slice.call(arguments));\n        }\n        // Split the inputs into a list of path commands.\n        let parts = [], i, l;\n        for (i = 0, l = arguments.length; i < l; i++) {\n            parts = parts.concat(arguments[i].split(\"/\"));\n        }\n    // Interpret the path commands to get the new resolved path.\n        const newParts = [];\n        for (i = 0, l = parts.length; i < l; i++) {\n            const part1 = parts[i];\n            // Remove leading and trailing slashes\n            // Also remove \".\" segments\n            if (!part1 ||(part1 === \".\")) continue;\n            // Interpret \"..\" to pop the last segment\n            if (part1 === \"..\") newParts.pop();\n            // Push new path segments.\n            else newParts.push(part1);\n        }\n    // Preserve the initial slash if there was one.\n        if (parts[0] === \"\") newParts.unshift(\"\");\n    // Turn back into a single string path.\n        return newParts.join(\"/\") || (newParts.length ? \"/\" : \".\");\n    }\n}\n\n/**\n * @private\n * @returns {string}\n */\nfunction timestamp() {\n    return (new Date()).toUTCString();\n}\n\n/**\n * @private\n * @this TraceLogger\n * @param level\n * @param err\n */\nfunction writeError(level, err) {\n\n    const keys = Object.keys(err).filter(x => {\n        return err.hasOwnProperty(x) && x !== 'message' && typeof err[x] !== 'undefined' && err[x] != null;\n    });\n    if (err instanceof Error) {\n        if (err.hasOwnProperty('stack')) {\n            this.write(level, err.stack);\n        }\n        else {\n            this.write(level, err.toString());\n        }\n    }\n    else {\n        this.write(level, err.toString());\n    }\n    if (keys.length>0) {\n        this.write(level, \"Error: \" + keys.map( x => {\n            return \"[\" + x + \"]=\" + err[x].toString()\n        }).join(', '));\n    }\n}\n\n\n/**\n * @param {number} value\n * @constructor\n */\nexport class Base26Number {\n\n    constructor(value) {\n        const thisValue = value;\n        this.toString = () => {\n            return Base26Number.toBase26(thisValue);\n        }\n    }\n\n    /**\n     *\n     * @param {number} x\n     * @returns {string}\n     */\n    static toBase26(x) {\n        let num = Math.floor(x | 0);\n        if (num<0) {\n            throw new Error(\"A non-positive integer cannot be converted to base-26 format.\");\n        }\n        if (num>208827064575) {\n            throw new Error(\"A positive integer bigger than 208827064575 cannot be converted to base-26 format.\");\n        }\n        let out = \"\";\n        let length = 1;\n        const a = \"a\".charCodeAt(0);\n        while(length<=8) {\n            out += String.fromCharCode(a + (num % 26));\n            num = Math.floor(num / 26);\n            length += 1;\n        }\n        return out;\n    }\n\n    /**\n     *\n     * @param {string} s\n     * @returns {number}\n     */\n    static fromBase26(s) {\n        let num = 0;\n        if (!/[a-z]{8}/.test(s)) {\n            throw new Error(\"Invalid base-26 format.\");\n        }\n        const a = \"a\".charCodeAt(0);\n        for (let i = 7; i >=0; i--) {\n            num = (num * 26) + (s[i].charCodeAt(0) - a);\n        }\n        return num;\n    }\n}\n\n/**\n * @class\n * @param {string=} value\n * @constructor\n */\nexport class Guid {\n    constructor(value) {\n        let _value;\n        if (typeof value === \"string\") {\n            // format value\n            _value = value.replace(/^{/,\"\").replace(/{$/,\"\");\n            // and validate\n            Args.check(GUID_REGEX.test(_value),\"Value must be a valid UUID\");\n        }\n        else {\n            // generate a new guid string\n            _value = TextUtils.newUUID();\n        }\n        // define property\n        Object.defineProperty(this, '_value', {\n                enumerable: false,\n                configurable: true,\n                value: _value\n            });\n    }\n\n    toJSON() {\n        return this._value;\n    }\n\n    valueOf() {\n        return this._value;\n    }\n\n    toString() {\n        return this._value;\n    }\n\n    equals(b) {\n        if (b instanceof Guid) {\n            return this._value.toLowerCase() === b._value.toLowerCase();\n        }\n        if (typeof b === 'string') {\n            return this._value.toLowerCase() === b.toLowerCase();\n        }\n        return this._value === b;\n    }\n\n    /**\n     * @param {string|*} s\n     * @returns {boolean}\n     */\n    static isGuid(s) {\n        if (s instanceof Guid) {\n            return true;\n        }\n        if (typeof s !== \"string\") {\n            return false;\n        }\n        return GUID_REGEX.test(s);\n    }\n\n    /**\n     * @returns {Guid}\n     */\n    static newGuid() {\n        return new Guid();\n    }\n}\n\nexport class ArgumentError extends Error {\n    /**\n    * @param {string} msg\n    * @param {string} code\n    */\n    constructor(msg, code) {\n        super(msg);\n        this.code = code || \"ERR_ARG\";\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\n","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\nimport _ from 'lodash';\nimport {Args} from './utils';\nimport {TraceUtils} from './utils';\nimport {PathUtils} from './utils';\nimport {AbstractClassError} from './errors';\n\nfunction cwd() {\n    //node.js mode\n    if (process && typeof process.cwd === 'function') {\n        return process.cwd();\n    }\n    //browser mode\n    else if (window && window.location && window.location.pathname) {\n        return '.';\n    }\n}\n\n/**\n * @class Represents an application configuration\n * @param {string=} configPath\n * @property {*} settings\n * @constructor\n */\nexport class ConfigurationBase {\n    constructor(configPath) {\n        \n        // set strategies\n        Object.defineProperty(this, '_strategies', {\n            enumerable: false,\n            writable: false,\n            value: { }\n        });\n\n        // set configuration path\n        Object.defineProperty(this, '_configurationPath', {\n            enumerable: false,\n            writable: true,\n            value: configPath || PathUtils.join(cwd(),'config')\n        });\n        TraceUtils.debug(`Initializing configuration under ${this._configurationPath}.`);\n\n        // set execution path\n        Object.defineProperty(this, '_executionPath', {\n            enumerable: false,\n            writable: true,\n            value: PathUtils.join(this._configurationPath,'..')\n        });\n        TraceUtils.debug(`Setting execution path under ${this._executionPath}`);\n\n        \n\n        //load default module loader strategy\n        this.useStrategy(ModuleLoaderStrategy, DefaultModuleLoaderStrategy);\n\n        //get configuration source\n        let configSourcePath;\n        let _config;\n        try {\n            let env = 'production';\n            //node.js mode\n            if (process && process.env) {\n                env = process.env['NODE_ENV'] || 'production';\n            }\n            //browser mode\n            else if (window && window.env) {\n                env = window.env['BROWSER_ENV'] || 'production';\n            }\n            configSourcePath = PathUtils.join(this._configurationPath, 'app.' + env + '.json');\n            TraceUtils.debug(`Validating environment configuration source on ${configSourcePath}.`);\n            _config = require(configSourcePath);\n        }\n        catch (err) {\n            if (err.code === 'MODULE_NOT_FOUND') {\n                TraceUtils.log('The environment specific configuration cannot be found or is inaccesible.');\n                try {\n                    configSourcePath = PathUtils.join(this._configurationPath, 'app.json');\n                    TraceUtils.debug(`Validating application configuration source on ${configSourcePath}.`);\n                    _config = require(configSourcePath);\n                }\n                catch(err) {\n                    if (err.code === 'MODULE_NOT_FOUND') {\n                        TraceUtils.log('The default application configuration cannot be found or is inaccesible.');\n                    }\n                    else {\n                        TraceUtils.error('An error occured while trying to open default application configuration.');\n                        TraceUtils.error(err);\n                    }\n                    TraceUtils.debug('Initializing empty configuration');\n                    _config = { };\n                }\n            }\n            else {\n                TraceUtils.error('An error occured while trying to open application configuration.');\n                TraceUtils.error(err);\n                //load default configuration\n                _config = { };\n            }\n        }\n\n        // set config source\n        Object.defineProperty(this, '_config', {\n            enumerable: false,\n            configurable: false,\n            value: _config\n        });\n\n        //initialize settings object\n        this._config.settings = this._config.settings || { };\n\n        /**\n         * @name ConfigurationBase#settings\n         * @type {*}\n         */\n\n        Object.defineProperty(this, 'settings',{\n            get: function() {\n                return this._config.settings;\n            },\n            enumerable:false,\n            configurable:false\n        });\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the configuration source object\n     * @returns {*}\n     */\n    getSource() {\n        return this._config;\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the source configuration object based on the given path (e.g. settings.auth.cookieName or settings/auth/cookieName)\n     * @param {string} p - A string which represents an object path\n     * @returns {Object|Array}\n     */\n    getSourceAt(p) {\n        return _.at(this._config,p.replace(/\\//g,'.'))[0];\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns a boolean which indicates whether the specified  object path exists or not (e.g. settings.auth.cookieName or settings/auth/cookieName)\n     * @param {string} p - A string which represents an object path\n     * @returns {boolean}\n     */\n    hasSourceAt(p) {\n        return typeof _.at(this._config,p.replace(/\\//g,'.'))[0] !== 'undefined';\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Sets the config value to the specified object path (e.g. settings.auth.cookieName or settings/auth/cookieName)\n     * @param {string} p - A string which represents an object path\n     * @param {*} value\n     * @returns {Object}\n     */\n    setSourceAt(p, value) {\n        return _.set(this._config, p.replace(/\\//g,'.'), value);\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Sets the current execution path\n     * @param {string} p\n     * @returns ConfigurationBase\n     */\n    setExecutionPath(p) {\n        this._executionPath = p;\n        return this;\n    }\n\n    /**\n     * Gets the current execution path\n     * @returns {string}\n     */\n    getExecutionPath() {\n        return this._executionPath;\n    }\n\n    /**\n     * Gets the current configuration path\n     * @returns {string}\n     */\n    getConfigurationPath() {\n        return this._configurationPath;\n    }\n\n    /**\n     * Register a configuration strategy\n     * @param {Function} configStrategyCtor\n     * @param {Function} strategyCtor\n     * @returns ConfigurationBase\n     */\n    useStrategy(configStrategyCtor, strategyCtor) {\n        Args.notFunction(configStrategyCtor,\"Configuration strategy constructor\");\n        Args.notFunction(strategyCtor,\"Strategy constructor\");\n        this._strategies[\"$\".concat(configStrategyCtor.name)] = new strategyCtor(this);\n        return this;\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Gets a configuration strategy\n     * @param {Function} configStrategyCtor\n     */\n    getStrategy(configStrategyCtor) {\n        Args.notFunction(configStrategyCtor,\"Configuration strategy constructor\");\n        return this._strategies[\"$\".concat(configStrategyCtor.name)];\n    }\n\n    /**\n     * Gets a configuration strategy\n     * @param {Function} configStrategyCtor\n     */\n    hasStrategy(configStrategyCtor) {\n        Args.notFunction(configStrategyCtor,\"Configuration strategy constructor\");\n        return typeof this._strategies[\"$\".concat(configStrategyCtor.name)] !== 'undefined';\n    }\n\n    /**\n     * Gets the current configuration\n     * @returns ConfigurationBase - An instance of DataConfiguration class which represents the current data configuration\n     */\n    static getCurrent() {\n        if (ConfigurationBase._currentConfiguration == null) {\n            ConfigurationBase._currentConfiguration = new ConfigurationBase();\n        }\n        return ConfigurationBase._currentConfiguration;\n    }\n\n    /**\n     * Sets the current configuration\n     * @param {ConfigurationBase} configuration\n     * @returns ConfigurationBase - An instance of ApplicationConfiguration class which represents the current configuration\n     */\n    static setCurrent(configuration) {\n        if (configuration instanceof ConfigurationBase) {\n            if (!configuration.hasStrategy(ModuleLoaderStrategy)) {\n                configuration.useStrategy(ModuleLoaderStrategy, DefaultModuleLoaderStrategy);\n            }\n            ConfigurationBase._currentConfiguration = configuration;\n            return ConfigurationBase._currentConfiguration;\n        }\n        throw new TypeError('Invalid argument. Expected an instance of DataConfiguration class.');\n    }\n}\n\nObject.defineProperty(ConfigurationBase, '_currentConfiguration', {\n    enumerable: false,\n    configurable: false,\n    value: null\n});\n\n/**\n * @class\n * @param {ConfigurationBase} config\n * @constructor\n * @abstract\n */\nexport class ConfigurationStrategy {\n    constructor(config) {\n        Args.check(this.constructor.name !== ConfigurationStrategy.name, new AbstractClassError());\n        Args.notNull(config, 'Configuration');\n        this._config = config;\n    }\n\n    /**\n     * @returns {ConfigurationBase}\n     */\n    getConfiguration() {\n        return this._config;\n    }\n}\n\n/**\n * @class\n * @constructor\n * @param {ConfigurationBase} config\n * @extends ConfigurationStrategy\n */\nexport class ModuleLoaderStrategy extends ConfigurationStrategy {\n    constructor(config) {\n        super(config);\n    }\n\n    require(modulePath) {\n        Args.notEmpty(modulePath,'Module Path');\n        if (!/^.\\//i.test(modulePath)) {\n            if (require.resolve && require.resolve.paths) {\n                /**\n                 * get require paths collection\n                 * @type string[]\n                 */\n                let paths = require.resolve.paths(modulePath);\n                //get execution\n                let path1 = this.getConfiguration().getExecutionPath();\n                //loop directories to parent (like classic require)\n                while (path1) {\n                    //if path does not exist in paths collection\n                    if (paths.indexOf(PathUtils.join(path1,'node_modules'))<0) {\n                        //add it\n                        paths.push(PathUtils.join(path1,'node_modules'));\n                        //and check the next path which is going to be resolved\n                        if (path1 === PathUtils.join(path1,'..')) {\n                            //if it is the same with the current path break loop\n                            break;\n                        }\n                        //otherwise get parent path\n                        path1 = PathUtils.join(path1,'..');\n                    }\n                    else {\n                        //path already exists in paths collection, so break loop\n                        break;\n                    }\n                }\n                let finalModulePath = require.resolve(modulePath, {\n                    paths:paths\n                });\n                return require(finalModulePath);\n            }\n            else {\n                return require(modulePath);\n            }\n        }\n        return require(PathUtils.join(this.getConfiguration().getExecutionPath(),modulePath));\n    }\n}\n\n/**\n * @classdesc\n * @extends ModuleLoaderStrategy\n */\nexport class DefaultModuleLoaderStrategy extends ModuleLoaderStrategy {\n    /**\n    * @param {ConfigurationBase} config\n    */\n    constructor(config) {\n        super(config);\n    }\n}\n\n\n","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\nimport _ from 'lodash';\n\n// eslint-disable-next-line no-unused-vars\n// tslint:disable-next-line:no-unused-variable\nconst HTML_START_CHAR = '<';\nconst HTML_END_CHAR = '>';\nconst HTML_FULL_END_STRING = ' />';\nconst HTML_SPACE_CHAR = ' ';\nconst HTML_ATTR_STRING = '%0=\"%1\"';\nconst HTML_START_TAG_STRING = '<%0';\nconst HTML_END_TAG_STRING = '</%0>';\n\n\n/**\n * @classdesc HtmlWriter class represents a helper class for rendering HTML content.\n * @class\n * @constructor\n */\nexport class HtmlWriter {\n    constructor() {\n        /**\n         * @private\n         * @type {Array}\n         */\n        this.bufferedAttributes=[];\n        /**\n         * @private\n         * @type {Array}\n         */\n        this.bufferedTags = [];\n        /**\n         * @private\n         * @type {String}\n         */\n        this.buffer = '';\n        /**\n         * @private\n         * @type {Integer}\n         */\n        this.indent = true;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Writes an attribute to an array of attributes that is going to be used in writeBeginTag function\n     * @param {String} name - The name of the HTML attribute\n     * @param {String} value - The value of the HTML attribute\n     * @returns {HtmlWriter}\n     */\n    writeAttribute(name, value) {\n        this.bufferedAttributes.push({name:name, value:value});\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Writes an array of attributes to the output buffer. This attributes are going to be rendered after writeBeginTag or WriteFullBeginTag function call.\n     * @param {Array|Object} obj - An array of attributes or an object that represents an array of attributes\n     * @returns {HtmlWriter}\n     */\n    writeAttributes(obj) {\n        if (obj===null)\n            return this;\n        if (Array.isArray(obj)) {\n            for (let i = 0; i < obj.length; i++) {\n                this.bufferedAttributes.push( { name:obj[i].name, value:obj[i].value } );\n            }\n        }\n        else {\n            for (let prop in obj)\n            {\n                if (obj.hasOwnProperty(prop)) {\n                    if (obj[prop]!==null) {\n                        this.bufferedAttributes.push( { name:prop, value:obj[prop] } );\n                    }\n                }\n            }\n        }\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * @param {String} tag\n     * @returns {HtmlWriter}\n     */\n    writeBeginTag(tag) {\n        //write <TAG\n        if (this.indent)\n        {\n            //this.buffer += '\\n';\n            this.buffer += '\\t'.repeat(this.bufferedTags.length);\n        }\n        this.buffer += HTML_START_TAG_STRING.replace(/%0/, tag);\n        this.bufferedTags.push(tag);\n        if (this.bufferedAttributes.length>0)\n        {\n            let s = '';\n            this.bufferedAttributes.forEach(attr => {\n                //write attribute='value'\n                s += HTML_SPACE_CHAR;\n                s += HTML_ATTR_STRING.replace(/%0/,attr.name).replace(/%1/, _.escape(attr.value));\n            });\n            this.buffer += s;\n        }\n        this.bufferedAttributes.splice(0,this.bufferedAttributes.length);\n        this.buffer += HTML_END_CHAR;\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Writes a full begin HTML tag (e.g <div/>).\n     * @param {String} tag\n     * @returns {HtmlWriter}\n     */\n    writeFullBeginTag(tag) {\n        //write <TAG\n        if (this.indent)\n        {\n            this.buffer += '\\n';\n            this.buffer +=_.repeat('\\t', this.bufferedTags.length);\n        }\n        this.buffer += HTML_START_TAG_STRING.replace(/%0/, tag);\n        if (this.bufferedAttributes.length>0)\n        {\n            let s = '';\n            this.bufferedAttributes.forEach( attr => {\n                //write attribute='value'\n                s += HTML_SPACE_CHAR;\n                s += HTML_ATTR_STRING.replace(/%0/,attr.name).replace(/%1/, _.escape(attr.value));\n            });\n            this.buffer += s;\n        }\n        this.bufferedAttributes.splice(0,this.bufferedAttributes.length);\n        this.buffer += HTML_FULL_END_STRING;\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Writes an end HTML tag (e.g </div>) based on the current buffered tags.\n     * @returns {HtmlWriter}\n     */\n    writeEndTag() {\n        const tagsLength = this.bufferedTags ? this.bufferedTags.length : 0;\n        if (tagsLength===0)\n            return this;\n        if (this.indent)\n        {\n            this.buffer += '\\n';\n            this.buffer +=_.repeat('\\t', tagsLength-1);\n        }\n        this.buffer += HTML_END_TAG_STRING.replace(/%0/,this.bufferedTags[tagsLength-1]);\n        this.bufferedTags.splice(tagsLength-1,1);\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     *\n     * @param {String} s\n     * @returns {HtmlWriter}\n     */\n    writeText(s) {\n        if (!s)\n            return this;\n        if (this.indent)\n        {\n            this.buffer += '\\n';\n            this.buffer +=_.repeat('\\t', this.bufferedTags.length);\n        }\n        this.buffer += _.escape(s);\n        return this;\n    }\n\n    /**\n     *\n     * @param {String} s\n     * @returns {HtmlWriter}\n     */\n    write(s) {\n        this.buffer += s;\n        return this;\n    }\n\n    /**\n     * @returns {String}\n     */\n    toString() {\n        return this.buffer;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * @param {function} fn\n     */\n    writeTo(fn) {\n        if (typeof fn === 'function') {\n            //call function\n            fn(this.buffer);\n            //and clear buffer\n            this.buffer='';\n            //and clear buffered tags\n            this.bufferedTags.splice(0,this.bufferedTags.length);\n        }\n    }\n}\n","/**\n * MOST Web Framework 3.0 Codename Zero Gravity\n * Copyright (c) 2014-2019, THEMOST LP All rights reserved\n *\n * Use of this source code is governed by an BSD-3-Clause license that can be\n * found in the LICENSE file at https://themost.io/license\n */\nimport {AbstractMethodError} from \"./errors\";\nimport {AbstractClassError} from \"./errors\";\n\n/**\n *\n * @class\n * @abstract\n * @param {string=} configPath\n */\nclass IApplication {\n    // eslint-disable-next-line no-unused-vars\n    constructor(_configPath) {\n        if (this.constructor === IApplication.prototype.constructor) {\n            throw new AbstractClassError();\n        }\n    }\n\n    /**\n     * Registers an application strategy e.g. an singleton service which to be used in application contextr\n     * @param {Function} serviceCtor\n     * @param {Function} strategyCtor\n     * @returns IApplication\n     */\n    // eslint-disable-next-line no-unused-vars\n    useStrategy(serviceCtor, strategyCtor) {\n        throw new AbstractMethodError();\n    }\n\n    /**\n    * @param {Function} serviceCtor\n    * @returns {boolean}\n    */\n    // eslint-disable-next-line no-unused-vars\n    hasStrategy(serviceCtor) {\n        throw new AbstractMethodError();\n    }\n\n    /**\n     * Gets an application strategy based on the given base service type\n     * @param {Function} serviceCtor\n     * @return {*}\n     */\n    // eslint-disable-next-line no-unused-vars\n    getStrategy(serviceCtor) {\n        throw new AbstractMethodError();\n    }\n\n    /**\n     * @returns {ConfigurationBase}\n     */\n    getConfiguration() {\n        throw new AbstractMethodError();\n    }\n}\n\n/**\n *\n * @class\n * @abstract\n * @param {IApplication} app\n */\n// eslint-disable-next-line no-unused-vars\nclass IApplicationService {\n    constructor(app) {\n        if (this.constructor === IApplicationService.prototype.constructor) {\n            throw new AbstractClassError();\n        }\n    }\n    /**\n     * @returns {IApplication}\n     */\n    getApplication() {\n        throw new AbstractMethodError();\n    }\n}\n\n\n/**\n * @classdesc Represents an application service\n * @class\n */\n// eslint-disable-next-line no-unused-vars\nclass ApplicationService extends IApplication {\n    /**\n     * @param {IApplication} app\n     */\n    constructor(app) {\n        super(app);\n        Object.defineProperty(this, '_app', {\n            enumerable: false,\n            writable: false,\n            value: app\n        });\n    }\n\n    /**\n     * @returns {IApplication}\n     */\n    getApplication() {\n        return this._app;\n    }\n}\n\nexport {IApplication};\nexport {IApplicationService};\nexport {ApplicationService};\n"],"names":["SequentialEventEmitter","event","_args","listeners","Error","argsAndCallback","concat","Array","prototype","slice","call","arguments","length","TypeError","callback","applyEachSeries","apply","EventEmitter","Errors","statusCode","title","message","module","AbstractMethodError","msg","captureStackTrace","constructor","AbstractClassError","CodedError","code","FileNotFoundError","HttpError","status","innerMessage","finalStatus","parseInt","err","errors","find","x","hasOwnProperty","Object","assign","HttpBadRequestError","HttpNotFoundError","HttpMethodNotAllowedError","HttpUnauthorizedError","HttpNotAcceptableError","HttpRequestTimeoutError","HttpConflictError","HttpTokenExpiredError","HttpTokenRequiredError","HttpForbiddenError","HttpServerError","HttpServiceUnavailable","DataError","model","field","additionalData","NotNullError","DataNotFoundError","AccessDeniedError","UniqueConstraintError","IS_NODE","toString","process","UUID_CHARS","HEX_CHARS","STRIP_COMMENTS","DATE_TIME_REGEX","BOOLEAN_TRUE_REGEX","BOOLEAN_FALSE_REGEX","NULL_REGEX","UNDEFINED_REGEX","INT_REGEX","FLOAT_REGEX","GUID_REGEX","LOG_LEVELS","error","warn","info","verbose","debug","UnknownPropertyDescriptor","obj","name","defineProperty","configurable","enumerable","get","set","value","LangUtils","ctor","superCtor","utilModule","util","require","inherits","create","writable","setPrototypeOf","__proto__","super_","fn","fnStr","replace","result","indexOf","match","parseFloat","Date","parse","origin","expr","options","convertValues","exec","descriptor","expr1","test","isArray","substr","index","extend","re","typedValue","convert","push","form","keys","forEach","key","any","Args","notNull","res","ArgumentError","arg","isNaN","bind","notNumber","TextUtils","md5","md5module","window","toUTCString","JSON","stringify","crypto","createHash","update","digest","cryptoModule","sha1","sha256","chars","uuid","r","i","Math","random","join","TraceLogger","colors","level","env","NODE_ENV","check","data","args","writeError","write","sprintf","text","console","log","timestamp","toUpperCase","TraceUtils","logger","_logger","_data","RandomUtils","str","randomInt","min","max","floor","NumberUtils","s","num","a","charCodeAt","out","String","fromCharCode","PathUtils","_part","pathModule","path","parts","l","split","newParts","part1","pop","unshift","filter","stack","map","Base26Number","thisValue","toBase26","Guid","_value","newUUID","b","toLowerCase","cwd","location","pathname","ConfigurationBase","configPath","_configurationPath","_executionPath","useStrategy","ModuleLoaderStrategy","DefaultModuleLoaderStrategy","configSourcePath","_config","settings","p","_","at","configStrategyCtor","strategyCtor","notFunction","_strategies","_currentConfiguration","configuration","hasStrategy","ConfigurationStrategy","config","modulePath","notEmpty","resolve","paths","path1","getConfiguration","getExecutionPath","finalModulePath","HTML_END_CHAR","HTML_FULL_END_STRING","HTML_SPACE_CHAR","HTML_ATTR_STRING","HTML_START_TAG_STRING","HTML_END_TAG_STRING","HtmlWriter","bufferedAttributes","bufferedTags","buffer","indent","prop","tag","repeat","attr","escape","splice","tagsLength","IApplication","_configPath","serviceCtor","IApplicationService","app","ApplicationService","_app"],"mappings":"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"}